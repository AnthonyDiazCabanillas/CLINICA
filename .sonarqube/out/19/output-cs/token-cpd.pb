ˇ
OD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\WeatherForecast.cs
	namespace 	
Api
 
. 
Clinica 
{ 
public 
class 
WeatherForecast 
{ 
public 
DateTime	 
Date 
{ 
get 
; 
set !
;! "
}# $
public 
int	 
TemperatureC 
{ 
get 
;  
set! $
;$ %
}& '
public		 
int			 
TemperatureF		 
=>		 
$num		 
+		  !
(		" #
int		# &
)		& '
(		' (
TemperatureC		( 4
/		5 6
$num		7 =
)		= >
;		> ?
public 
string	 
? 
Summary 
{ 
get 
; 
set  #
;# $
}% &
} 
} á+
GD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Program.cs
var		 
builder		 
=		 
WebApplication		 
.		 
CreateBuilder		 *
(		* +
args		+ /
)		/ 0
;		0 1
var 
_politicaPermitida 
= 
$str '
;' (
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddCors 
( 
p 
=> 
p 
.  
	AddPolicy  )
() *
_politicaPermitida* <
,< =
buil> B
=>B D
builD H
.H I
WithOriginsI T
(T U
$strU X
)X Y
.Y Z
AllowAnyMethodZ h
(h i
)i j
.j k
AllowAnyHeaderk y
(y z
)z {
){ |
)| }
;} ~
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
IConfiguration 
configuration 
= 
app "
." #
Services# +
.+ ,
GetRequiredService, >
<> ?
IConfiguration? M
>M N
(N O
)O P
;P Q
Bus 
. 
Clinica 
. 
	VarGlobal 
. 
LoadConectionString )
() *
configuration* 7
[7 8
$str8 V
]V W
,W X
BusY \
.\ ]
Clinica] d
.d e
	VarGlobale n
.n o
ListDataBaseo {
.{ |
clinica	| É
)
É Ñ
;
Ñ Ö
Bus 
. 
Clinica 
. 
	VarGlobal 
. 
LoadConectionString )
() *
configuration* 7
[7 8
$str8 X
]X Y
,Y Z
Bus[ ^
.^ _
Clinica_ f
.f g
	VarGlobalg p
.p q
ListDataBaseq }
.} ~
	logistica	~ á
)
á à
;
à â
Bus 
. 
Clinica 
. 
	VarGlobal 
. 
LoadConectionString )
() *
configuration* 7
[7 8
$str8 X
]X Y
,Y Z
Bus[ ^
.^ _
Clinica_ f
.f g
	VarGlobalg p
.p q
ListDataBaseq }
.} ~
	seguridad	~ á
)
á à
;
à â
Bus 
. 
Clinica 
. 
	VarGlobal 
. 
LoadConectionString )
() *
configuration* 7
[7 8
$str8 ]
]] ^
,^ _
Bus` c
.c d
Clinicad k
.k l
	VarGloball u
.u v
ListDataBase	v Ç
.
Ç É
CitasSanFelipe
É ë
)
ë í
;
í ì

MetaGlobal"" 

.""
 %
IdeModuloSistemaPrincipal"" $
=""% &
configuration""' 4
[""4 5
$str""5 I
]""I J
;""J K

MetaGlobal## 

.##
 
NameSistema## 
=## 
configuration## &
[##& '
$str##' ;
]##; <
;##< =

MetaGlobal$$ 

.$$
 
VersionPublicacion$$ 
=$$ 
configuration$$  -
[$$- .
$str$$. B
]$$B C
;$$C D
builder&& 
.&& 
Environment&& 
.&& 
ApplicationName&& #
=&&$ %

MetaGlobal&&& 0
.&&0 1
NameSistema&&1 <
+&&= >
$str&&? D
+&&E F

MetaGlobal&&G Q
.&&Q R
VersionPublicacion&&R d
;&&d e
if** 
(** 
app** 
.** 
Environment** 
.** 
IsDevelopment** !
(**! "
)**" #
||**$ &
app**' *
.*** +
Environment**+ 6
.**6 7
IsProduction**7 C
(**C D
)**D E
)**E F
{,, 
app-- 
.-- 

UseSwagger-- 
(-- 
)-- 
;-- 
app.. 
... 
UseSwaggerUI.. 
(.. 
).. 
;.. 
}// 
app11 
.11 
UseHttpsRedirection11 
(11 
)11 
;11 
app33 
.33 
UseAuthorization33 
(33 
)33 
;33 
app55 
.55 
MapControllers55 
(55 
)55 
;55 
app88 
.88 
UseCors88 
(88 
_politicaPermitida88 
)88 
;88  
app:: 
.:: 
Run:: 
(:: 
):: 	
;::	 
Í
MD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Model\Request.cs
	namespace 	
Api
 
. 
Clinica 
. 
Model 
{ 
public		 

class		 
Request		 
{

 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
=' (
$str) +
;+ ,
public 
class 
Roe 
{ 	
public 
string 
CodigoAtencion (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
=7 8
$str9 ;
;; <
public 
string 
	Documento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
$str4 6
;6 7
} 	
} 
} ›
OD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Data\MetaGlobal.cs
	namespace 	
Api
 
. 
Clinica 
. 
Data 
{ 
public 

static 
class 

MetaGlobal "
{ 
public 
static 
string 
PageDescription ,
=- .
$str/ 1
;1 2
public 
static 
string 
	PageTitle &
=' (
$str) +
;+ ,
public 
static 
string 
VersionPublicacion /
=0 1
$str2 4
;4 5
public   
static   
string   
NameSistema   (
=  ) *
$str  + -
;  - .
public'' 
static'' 
string'' %
IdeModuloSistemaPrincipal'' 6
=''7 8
$str''9 ;
;''; <
public** 
static** 
RenderFragment** $
StringToHtml**% 1
(**1 2
string**2 8

htmlString**9 C
)**C D
{++ 	
return,, 
new,, 
RenderFragment,, %
(,,% &
b,,& '
=>,,( *
b,,+ ,
.,,, -
AddMarkupContent,,- =
(,,= >
$num,,> ?
,,,? @

htmlString,,A K
),,K L
),,L M
;,,M N
}-- 	
}.. 
}// Ñ
KD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Data\Config.cs
	namespace 	
Api
 
. 
Clinica 
. 
Data 
{ 
public 
class 
Config 
{ 
public 
string
 
Key 
= 
$str 1
;1 2
public 
string	 

keySoftvan 
= 
$str ;
;; <
} 
} ÃA
\D:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Controllers\TramasController.cs
	namespace 	
Api
 
. 
Clinica 
. 
Controllers !
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
$str

 
)

 
]

 
public 

class 
TramasController !
:" #
ControllerBase$ 2
{ 
Config 
_config 
= 
new 
Config #
(# $
)$ %
;% &
[ 	
Route	 
( 
$str -
)- .
]. /
[ 	
HttpGet	 
] 
[ 	 
ProducesResponseType	 
( 
StatusCodes )
.) *
Status200OK* 5
)5 6
]6 7
[ 	 
ProducesResponseType	 
( 
StatusCodes )
.) *
Status400BadRequest* =
)= >
]> ?
public 
async 
Task 
< 
IActionResult '
>' (
ListadoTabsTrama) 9
(9 :
): ;
{ 	
try 
{ 
string 
token 
= 
Criptography +
.+ ,"
DecryptConectionString, B
(B C
RequestC J
.J K
HeadersK R
.R S
WhereS X
(X Y
xY Z
=>[ ]
x^ _
._ `
Key` c
==d f
$strg v
)v w
.w x
FirstOrDefault	x Ü
(
Ü á
)
á à
.
à â
Value
â é
)
é è
;
è ê
if 
( 
token 
== 
_config $
.$ %
Key% (
)( )
{ 
var 
	Resultado !
=" #
await$ )
new* -
TramaBus. 6
(6 7
)7 8
.8 9
ListadoTramaTabs9 I
(I J
)J K
;K L
if 
( 
	Resultado !
.! "

IdRegistro" ,
==- /
-0 1
$num1 2
)2 3
{ 
return 

BadRequest )
() *
	Resultado* 3
.3 4
Mensaje4 ;
); <
;< =
} 
return 
Ok 
( 
	Resultado '
)' (
;( )
}   
else!! 
{"" 
return## 

BadRequest## %
(##% &
$str##& =
)##= >
;##> ?
}$$ 
}%% 
catch&& 
(&& 
	Exception&& 
ex&& 
)&&  
{&&! "
return'' 

BadRequest'' !
(''! "
ex''" $
.''$ %
Message''% ,
)'', -
;''- .
}(( 
})) 	
[++ 	
Route++	 
(++ 
$str++ 1
)++1 2
]++2 3
[,, 	
HttpGet,,	 
],, 
[-- 	 
ProducesResponseType--	 
(-- 
StatusCodes-- )
.--) *
Status200OK--* 5
)--5 6
]--6 7
[.. 	 
ProducesResponseType..	 
(.. 
StatusCodes.. )
...) *
Status400BadRequest..* =
)..= >
]..> ?
public// 
async// 
Task// 
<// 
IActionResult// '
>//' ( 
ListadoDetalleTramas//) =
(//= >
string//> D
NroComprobante//E S
)//S T
{00 	
try11 
{22 
string33 
token33 
=33 
Criptography33 +
.33+ ,"
DecryptConectionString33, B
(33B C
Request33C J
.33J K
Headers33K R
.33R S
Where33S X
(33X Y
x33Y Z
=>33[ ]
x33^ _
.33_ `
Key33` c
==33d f
$str33g v
)33v w
.33w x
FirstOrDefault	33x Ü
(
33Ü á
)
33á à
.
33à â
Value
33â é
)
33é è
;
33è ê
if44 
(44 
token44 
==44 
_config44 $
.44$ %
Key44% (
)44( )
{55 
var66 
	resultado66 !
=66" #
await66$ )
new66* -
TramaBus66. 6
(666 7
)667 8
.668 9 
ListadoDetalleTramas669 M
(66M N
NroComprobante66N \
)66\ ]
;66] ^
if77 
(77 
	resultado77 !
.77! "

IdRegistro77" ,
==77- /
-770 1
$num771 2
)772 3
{88 
return99 

BadRequest99 )
(99) *
	resultado99* 3
.993 4
Mensaje994 ;
)99; <
;99< =
}:: 
return;; 
Ok;; 
(;; 
	resultado;; '
);;' (
;;;( )
}<< 
else== 
{== 
return>> 

BadRequest>> %
(>>% &
$str>>& =
)>>= >
;>>> ?
}?? 
}AA 
catchBB 
(BB 
	ExceptionBB 
exBB 
)BB  
{CC 
returnDD 

BadRequestDD !
(DD! "
exDD" $
.DD$ %
MessageDD% ,
)DD, -
;DD- .
}EE 
}FF 	
[II 	
RouteII	 
(II 
$strII 3
)II3 4
]II4 5
[JJ 	
HttpPostJJ	 
]JJ 
[KK 	 
ProducesResponseTypeKK	 
(KK 
StatusCodesKK )
.KK) *
Status200OKKK* 5
)KK5 6
]KK6 7
[LL 	 
ProducesResponseTypeLL	 
(LL 
StatusCodesLL )
.LL) *
Status400BadRequestLL* =
)LL= >
]LL> ?
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' ("
ActualizarDetalleTramaMM) ?
(MM? @
[MM@ A
FromBodyMMA I
]MMI J
TramasEMMK R
objTramaMMS [
)MM[ \
{NN 	
tryOO 
{PP 
stringQQ 
tokenQQ 
=QQ 
CriptographyQQ +
.QQ+ ,"
DecryptConectionStringQQ, B
(QQB C
RequestQQC J
.QQJ K
HeadersQQK R
.QQR S
WhereQQS X
(QQX Y
xQQY Z
=>QQ[ ]
xQQ^ _
.QQ_ `
KeyQQ` c
==QQd f
$strQQg v
)QQv w
.QQw x
FirstOrDefault	QQx Ü
(
QQÜ á
)
QQá à
.
QQà â
Value
QQâ é
)
QQé è
;
QQè ê
ifRR 
(RR 
tokenRR 
==RR 
_configRR $
.RR$ %
KeyRR% (
)RR( )
{SS 
varTT 
tramaupdateTT #
=TT$ %
awaitTT& +
newTT, /
TramaBusTT0 8
(TT8 9
)TT9 :
.TT: ;
ActualizarTramasTT; K
(TTK L
objTramaTTL T
)TTT U
;TTU V
ifUU 
(UU 
tramaupdateUU #
.UU# $

IdRegistroUU$ .
==UU/ 1
-UU2 3
$numUU3 4
)UU4 5
{VV 
returnWW 

BadRequestWW )
(WW) *
tramaupdateWW* 5
.WW5 6
MensajeWW6 =
)WW= >
;WW> ?
}XX 
return[[ 
Ok[[ 
([[ 
tramaupdate[[ )
)[[) *
;[[* +
}\\ 
else]] 
{]] 
return^^ 

BadRequest^^ %
(^^% &
$str^^& =
)^^= >
;^^> ?
}__ 
}aa 
catchbb 
(bb 
	Exceptionbb 
exbb 
)bb  
{bb! "
returncc 

BadRequestcc !
(cc! "
excc" $
.cc$ %
Messagecc% ,
)cc, -
;cc- .
}dd 
}ee 	
}ff 
}gg À
YD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Controllers\TCIController.cs
	namespace 	
Api
 
. 
Clinica 
. 
Controllers !
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
TCIController 
:  
ControllerBase! /
{ 
Hospital 
_bl 
= 
new 
Hospital #
(# $
)$ %
;% &
Config 
_config 
= 
new 
Config #
(# $
)$ %
;% &
[!! 	
Route!!	 
(!! 
$str!! "
)!!" #
]!!# $
["" 	
HttpGet""	 
]"" 
public## 

ObtenerPDF## 
.## 
Response## "%
ObtenerComprobantePDFByte### <
(##< =
string##= C
Comprobante##D O
)##O P
{$$ 	
try%% 
{&& 
Comprobante'' 
='' 
Uri'' !
.''! "
UnescapeDataString''" 4
(''4 5
Comprobante''5 @
)''@ A
;''A B

ObtenerPDF(( 
.(( 
Response(( # 
oObtenerPDFResultado(($ 8
=((9 :
new((; >

ObtenerPDF((? I
.((I J
Response((J R
(((R S
)((S T
;((T U
string)) 
token)) 
=)) 
Criptography)) +
.))+ ,"
DecryptConectionString)), B
())B C
Request))C J
.))J K
Headers))K R
.))R S
Where))S X
())X Y
x))Y Z
=>))[ ]
x))^ _
.))_ `
Key))` c
==))d f
$str))g v
)))v w
.))w x
FirstOrDefault	))x Ü
(
))Ü á
)
))á à
.
))à â
Value
))â é
)
))é è
;
))è ê
if** 
(** 
token** 
==** 
_config** $
.**$ %
Key**% (
)**( )
{++  
oObtenerPDFResultado++ &
=++' (
new++) ,
	Generales++- 6
(++6 7
)++7 8
.++8 9!
ObtenerComprobantePDF++9 N
(++N O
new++O R

ObtenerPDF++S ]
.++] ^
Requests++^ f
(++f g
Criptography++g s
.++s t#
DecryptConectionString	++t ä
(
++ä ã
Comprobante
++ã ñ
)
++ñ ó
)
++ó ò
)
++ò ô
;
++ô ö
}
++õ ú
else,, 
{--  
oObtenerPDFResultado-- &
=--' (
new--) ,

ObtenerPDF--- 7
.--7 8
Response--8 @
(--@ A
true--A E
,--E F
$str--G V
)--V W
;--W X
}--Y Z
return..  
oObtenerPDFResultado.. +
;..+ ,
}// 
catch00 
(00 
	Exception00 
ex00 
)00  
{00! "
throw00# (
new00) ,
	Exception00- 6
(006 7
ex007 9
.009 :
Message00: A
)00A B
;00B C
}00D E
}11 	
}22 
}33 ‘Ç
iD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Controllers\SeguridadDePasswordController.cs
	namespace 	
Api
 
. 
Clinica 
. 
Controllers !
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str -
)- .
]. /
public 

class )
SeguridadDePasswordController .
:/ 0

Controller1 ;
{   
SeguridadDePassword!! 
_bl!! 
=!!  !
new!!" %
SeguridadDePassword!!& 9
(!!9 :
)!!: ;
;!!; <
Config"" 
_config"" 
="" 
new"" 
Config"" #
(""# $
)""$ %
;""% &
[$$ 	
HttpGet$$	 
]$$ 
[%% 	
Route%%	 
(%% 
$str%%  
)%%  !
]%%! "
public&& 
async&& 
Task&& 
<&& 
IActionResult&& '
>&&' (
ValidarPassword&&) 8
(&&8 9
string&&9 ?
	password1&&@ I
,&&I J
string&&K Q
?&&Q R
	password2&&S \
)&&\ ]
{'' 	
	DataTable(( 
dt(( 
=(( 
new(( 
	DataTable(( (
(((( )
)(() *
;((* +
dt)) 
=)) 
_bl)) 
.)) !
Sp_ParamSeguridad_Sel)) *
())* +
)))+ ,
;)), -
int++ 
_min_caracter++ 
=++ 
$num++  !
;++! "
int,, 
_max_caracter,, 
=,, 
$num,,  "
;,," #
int-- 
_minus-- 
=-- 
$num-- 
;-- 
int.. 
_mayus.. 
=.. 
$num.. 
;.. 
int// 
_numero// 
=// 
$num// 
;// 
int00 
	_especial00 
=00 
$num00 
;00 
RespuestaJsonE22 

_respuesta22 %
=22& '
new22( +
RespuestaJsonE22, :
(22: ;
)22; <
;22< =
foreach44 
(44 
DataRow44 
row44  
in44! #
dt44$ &
.44& '
Rows44' +
)44+ ,
{55 
if66 
(66 
row66 
[66 
$str66  
]66  !
.66! "
ToString66" *
(66* +
)66+ ,
==66- /
$str660 4
&&665 7
row668 ;
[66; <
$str66< D
]66D E
.66E F
ToString66F N
(66N O
)66O P
==66Q S
$str66T W
)66W X
{77 
_min_caracter88 !
=88" #
Convert88$ +
.88+ ,
ToInt3288, 3
(883 4
row884 7
[887 8
$str888 ?
]88? @
.88@ A
ToString88A I
(88I J
)88J K
)88K L
;88L M
_max_caracter99 !
=99" #
$num99$ &
;99& '
Match;; 
matchLongitud1;; (
=;;) *
Regex;;+ 0
.;;0 1
Match;;1 6
(;;6 7
	password1;;7 @
,;;@ A
$str;;B H
+;;I J
_min_caracter;;K X
+;;Y Z
$str;;[ ^
+;;_ `
_max_caracter;;a n
+;;o p
$str;;q u
);;u v
;;;v w
Match<< 
matchLongitud2<< (
=<<) *
Regex<<+ 0
.<<0 1
Match<<1 6
(<<6 7
	password2<<7 @
,<<@ A
$str<<B H
+<<I J
_min_caracter<<K X
+<<Y Z
$str<<[ ^
+<<_ `
_max_caracter<<a n
+<<o p
$str<<q u
)<<u v
;<<v w
if>> 
(>> 
matchLongitud1>> &
.>>& '
Success>>' .
==>>/ 1
false>>2 7
)>>7 8
{?? 

_respuesta@@ "
.@@" #
message@@# *
=@@+ ,
$str@@- m
;@@m n

_respuestaAA "
.AA" #
exitoAA# (
=AA) *
falseAA+ 0
;AA0 1
returnCC 
OkCC !
(CC! "

_respuestaCC" ,
)CC, -
;CC- .
}DD 
ifFF 
(FF 
matchLongitud2FF &
.FF& '
SuccessFF' .
==FF/ 1
falseFF2 7
)FF7 8
{GG 

_respuestaHH "
.HH" #
messageHH# *
=HH+ ,
$strHH- m
;HHm n

_respuestaII "
.II" #
exitoII# (
=II) *
falseII+ 0
;II0 1
returnKK 
OkKK !
(KK! "

_respuestaKK" ,
)KK, -
;KK- .
}LL 
}NN 
elseOO 
ifOO 
(OO 
rowOO 
[OO 
$strOO %
]OO% &
.OO& '
ToStringOO' /
(OO/ 0
)OO0 1
==OO2 4
$strOO5 9
&&OO: <
rowOO= @
[OO@ A
$strOOA I
]OOI J
.OOJ K
ToStringOOK S
(OOS T
)OOT U
==OOV X
$strOOY \
)OO\ ]
{PP 
_minusQQ 
=QQ 
ConvertQQ $
.QQ$ %
ToInt32QQ% ,
(QQ, -
rowQQ- 0
[QQ0 1
$strQQ1 8
]QQ8 9
.QQ9 :
ToStringQQ: B
(QQB C
)QQC D
)QQD E
;QQE F
MatchSS 
matchMinusculas1SS *
=SS+ ,
RegexSS- 2
.SS2 3
MatchSS3 8
(SS8 9
	password1SS9 B
,SSB C
$strSSD L
)SSL M
;SSM N
MatchUU 
matchMinusculas2UU *
=UU+ ,
RegexUU- 2
.UU2 3
MatchUU3 8
(UU8 9
	password2UU9 B
,UUB C
$strUUD L
)UUL M
;UUM N
ifWW 
(WW 
matchMinusculas1WW (
.WW( )
SuccessWW) 0
==WW1 3
falseWW4 9
)WW9 :
{XX 

_respuestaYY "
.YY" #
messageYY# *
=YY+ ,
$strYY- ^
;YY^ _

_respuestaZZ "
.ZZ" #
exitoZZ# (
=ZZ) *
falseZZ+ 0
;ZZ0 1
return\\ 
Ok\\ !
(\\! "

_respuesta\\" ,
)\\, -
;\\- .
}]] 
if`` 
(`` 
matchMinusculas2`` (
.``( )
Success``) 0
==``1 3
false``4 9
)``9 :
{aa 

_respuestabb "
.bb" #
messagebb# *
=bb+ ,
$strbb- ^
;bb^ _

_respuestacc "
.cc" #
exitocc# (
=cc) *
falsecc+ 0
;cc0 1
returnee 
Okee !
(ee! "

_respuestaee" ,
)ee, -
;ee- .
}ff 
}gg 
elsehh 
ifhh 
(hh 
rowhh 
[hh 
$strhh %
]hh% &
.hh& '
ToStringhh' /
(hh/ 0
)hh0 1
==hh2 4
$strhh5 9
&&hh: <
rowhh= @
[hh@ A
$strhhA I
]hhI J
.hhJ K
ToStringhhK S
(hhS T
)hhT U
==hhV X
$strhhY \
)hh\ ]
{ii 
_mayusjj 
=jj 
Convertjj $
.jj$ %
ToInt32jj% ,
(jj, -
rowjj- 0
[jj0 1
$strjj1 8
]jj8 9
.jj9 :
ToStringjj: B
(jjB C
)jjC D
)jjD E
;jjE F
Matchll 
matchMayusculas1ll *
=ll+ ,
Regexll- 2
.ll2 3
Matchll3 8
(ll8 9
	password1ll9 B
,llB C
$strllD L
)llL M
;llM N
Matchnn 
matchMayusculas2nn *
=nn+ ,
Regexnn- 2
.nn2 3
Matchnn3 8
(nn8 9
	password2nn9 B
,nnB C
$strnnD L
)nnL M
;nnM N
ifpp 
(pp 
matchMayusculas1pp (
.pp( )
Successpp) 0
==pp1 3
falsepp4 9
)pp9 :
{qq 

_respuestarr "
.rr" #
messagerr# *
=rr+ ,
$strrr- ^
;rr^ _

_respuestass "
.ss" #
exitoss# (
=ss) *
falsess+ 0
;ss0 1
returnuu 
Okuu !
(uu! "

_respuestauu" ,
)uu, -
;uu- .
}vv 
ifxx 
(xx 
matchMayusculas2xx (
.xx( )
Successxx) 0
==xx1 3
falsexx4 9
)xx9 :
{yy 

_respuestazz "
.zz" #
messagezz# *
=zz+ ,
$strzz- ^
;zz^ _

_respuesta{{ "
.{{" #
exito{{# (
={{) *
false{{+ 0
;{{0 1
return}} 
Ok}} !
(}}! "

_respuesta}}" ,
)}}, -
;}}- .
}~~ 
}
ÄÄ 
else
ÅÅ 
if
ÅÅ 
(
ÅÅ 
row
ÅÅ 
[
ÅÅ 
$str
ÅÅ %
]
ÅÅ% &
.
ÅÅ& '
ToString
ÅÅ' /
(
ÅÅ/ 0
)
ÅÅ0 1
==
ÅÅ2 4
$str
ÅÅ5 9
&&
ÅÅ: <
row
ÅÅ= @
[
ÅÅ@ A
$str
ÅÅA I
]
ÅÅI J
.
ÅÅJ K
ToString
ÅÅK S
(
ÅÅS T
)
ÅÅT U
==
ÅÅV X
$str
ÅÅY \
)
ÅÅ\ ]
{
ÇÇ 
_numero
ÉÉ 
=
ÉÉ 
Convert
ÉÉ %
.
ÉÉ% &
ToInt32
ÉÉ& -
(
ÉÉ- .
row
ÉÉ. 1
[
ÉÉ1 2
$str
ÉÉ2 9
]
ÉÉ9 :
.
ÉÉ: ;
ToString
ÉÉ; C
(
ÉÉC D
)
ÉÉD E
)
ÉÉE F
;
ÉÉF G
Match
ÑÑ 
matchNumeros1
ÑÑ '
=
ÑÑ( )
Regex
ÑÑ* /
.
ÑÑ/ 0
Match
ÑÑ0 5
(
ÑÑ5 6
	password1
ÑÑ6 ?
,
ÑÑ? @
$str
ÑÑA F
)
ÑÑF G
;
ÑÑG H
Match
ÖÖ 
matchNumeros2
ÖÖ '
=
ÖÖ( )
Regex
ÖÖ* /
.
ÖÖ/ 0
Match
ÖÖ0 5
(
ÖÖ5 6
	password2
ÖÖ6 ?
,
ÖÖ? @
$str
ÖÖA F
)
ÖÖF G
;
ÖÖG H
if
áá 
(
áá 
matchNumeros1
áá %
.
áá% &
Success
áá& -
==
áá. 0
false
áá1 6
)
áá6 7
{
àà 

_respuesta
ââ "
.
ââ" #
message
ââ# *
=
ââ+ ,
$str
ââ- R
;
ââR S

_respuesta
ää "
.
ää" #
exito
ää# (
=
ää) *
false
ää+ 0
;
ää0 1
return
åå 
Ok
åå !
(
åå! "

_respuesta
åå" ,
)
åå, -
;
åå- .
}
çç 
if
êê 
(
êê 
matchNumeros2
êê %
.
êê% &
Success
êê& -
==
êê. 0
false
êê1 6
)
êê6 7
{
ëë 

_respuesta
íí "
.
íí" #
message
íí# *
=
íí+ ,
$str
íí- R
;
ííR S

_respuesta
ìì "
.
ìì" #
exito
ìì# (
=
ìì) *
false
ìì+ 0
;
ìì0 1
return
ïï 
Ok
ïï !
(
ïï! "

_respuesta
ïï" ,
)
ïï, -
;
ïï- .
}
ññ 
}
òò 
else
ôô 
if
ôô 
(
ôô 
row
ôô 
[
ôô 
$str
ôô %
]
ôô% &
.
ôô& '
ToString
ôô' /
(
ôô/ 0
)
ôô0 1
==
ôô2 4
$str
ôô5 9
&&
ôô: <
row
ôô= @
[
ôô@ A
$str
ôôA I
]
ôôI J
.
ôôJ K
ToString
ôôK S
(
ôôS T
)
ôôT U
==
ôôV X
$str
ôôY \
)
ôô\ ]
{
öö 
	_especial
õõ 
=
õõ 
Convert
õõ  '
.
õõ' (
ToInt32
õõ( /
(
õõ/ 0
row
õõ0 3
[
õõ3 4
$str
õõ4 ;
]
õõ; <
.
õõ< =
ToString
õõ= E
(
õõE F
)
õõF G
)
õõG H
;
õõH I
Match
ùù 
matchEspeciales1
ùù *
=
ùù+ ,
Regex
ùù- 2
.
ùù2 3
Match
ùù3 8
(
ùù8 9
	password1
ùù9 B
,
ùùB C
$str
ùùD e
)
ùùe f
;
ùùf g
Match
ûû 
matchEspeciales2
ûû *
=
ûû+ ,
Regex
ûû- 2
.
ûû2 3
Match
ûû3 8
(
ûû8 9
	password2
ûû9 B
,
ûûB C
$str
ûûD e
)
ûûe f
;
ûûf g
if
†† 
(
†† 
matchEspeciales1
†† (
.
††( )
Success
††) 0
==
††1 3
false
††4 9
)
††9 :
{
°° 

_respuesta
¢¢ "
.
¢¢" #
message
¢¢# *
=
¢¢+ ,
$str
¢¢- `
;
¢¢` a

_respuesta
££ "
.
££" #
exito
££# (
=
££) *
false
££+ 0
;
££0 1
return
•• 
Ok
•• !
(
••! "

_respuesta
••" ,
)
••, -
;
••- .
}
¶¶ 
if
®® 
(
®® 
matchEspeciales2
®® (
.
®®( )
Success
®®) 0
==
®®1 3
false
®®4 9
)
®®9 :
{
©© 

_respuesta
™™ "
.
™™" #
message
™™# *
=
™™+ ,
$str
™™- `
;
™™` a

_respuesta
´´ "
.
´´" #
exito
´´# (
=
´´) *
false
´´+ 0
;
´´0 1
return
≠≠ 
Ok
≠≠ !
(
≠≠! "

_respuesta
≠≠" ,
)
≠≠, -
;
≠≠- .
}
ÆÆ 
}
ØØ 
}
∞∞ 

_respuesta
µµ 
.
µµ 
message
µµ 
=
µµ  
$str
µµ! 9
;
µµ9 :

_respuesta
∂∂ 
.
∂∂ 
exito
∂∂ 
=
∂∂ 
true
∂∂ #
;
∂∂# $
return
∏∏ 
Ok
∏∏ 
(
∏∏ 

_respuesta
∏∏  
)
∏∏  !
;
∏∏! "
}
ππ 	
[
ªª 	
Route
ªª	 
(
ªª 
$str
ªª !
)
ªª! "
]
ªª" #
[
ºº 	
HttpPost
ºº	 
]
ºº 
public
ΩΩ 
dynamic
ΩΩ !
Sp_EncriptarSegPass
ΩΩ *
(
ΩΩ* +
	PasswordE
ΩΩ+ 4
_obj
ΩΩ5 9
)
ΩΩ9 :
{
ææ 	
try
øø 
{
¿¿ 
return
¡¡ 
_bl
¡¡ 
.
¡¡ !
Sp_EncriptarSegPass
¡¡ .
(
¡¡. /
_obj
¡¡/ 3
)
¡¡3 4
;
¡¡4 5
}
¬¬ 
catch
√√ 
(
√√ 
	Exception
√√ 
ex
√√ 
)
√√  
{
ƒƒ 
RespuestaJsonE
≈≈ 
_Rjson
≈≈ %
=
≈≈& '
new
≈≈( +
RespuestaJsonE
≈≈, :
(
≈≈: ;
)
≈≈; <
;
≈≈< =
_Rjson
∆∆ 
.
∆∆ 
exito
∆∆ 
=
∆∆ 
false
∆∆ $
;
∆∆$ %
_Rjson
«« 
.
«« 
message
«« 
=
««  
$str
««! C
;
««C D
return
»» 
_Rjson
»» 
;
»» 
}
…… 
}
   	
[
ÃÃ 	
Route
ÃÃ	 
(
ÃÃ 
$str
ÃÃ $
)
ÃÃ$ %
]
ÃÃ% &
[
ÕÕ 	
HttpPost
ÕÕ	 
]
ÕÕ 
public
ŒŒ 
dynamic
ŒŒ $
Sp_DesEncriptarSegPass
ŒŒ -
(
ŒŒ- .
	PasswordE
ŒŒ. 7
_obj
ŒŒ8 <
)
ŒŒ< =
{
œœ 	
try
—— 
{
““ 
return
”” 
_bl
”” 
.
”” $
Sp_DesEncriptarSegPass
”” 1
(
””1 2
_obj
””2 6
)
””6 7
;
””7 8
}
‘‘ 
catch
’’ 
(
’’ 
	Exception
’’ 
ex
’’ 
)
’’  
{
÷÷ 
RespuestaJsonE
◊◊ 
_Rjson
◊◊ %
=
◊◊& '
new
◊◊( +
RespuestaJsonE
◊◊, :
(
◊◊: ;
)
◊◊; <
;
◊◊< =
_Rjson
ÿÿ 
.
ÿÿ 
exito
ÿÿ 
=
ÿÿ 
false
ÿÿ $
;
ÿÿ$ %
_Rjson
ŸŸ 
.
ŸŸ 
message
ŸŸ 
=
ŸŸ  
$str
ŸŸ! C
;
ŸŸC D
return
⁄⁄ 
_Rjson
⁄⁄ 
;
⁄⁄ 
}
€€ 
}
‹‹ 	
}
ﬁﬁ 
}ﬂﬂ ˙
YD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Controllers\RoeController.cs
	namespace 	
Api
 
. 
Clinica 
. 
Controllers !
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
RoeController 
:  

Controller! +
{ 
[ 	
Route	 
( 
$str 4
)4 5
]5 6
[   	
HttpPost  	 
]   
[!! 	 
ProducesResponseType!!	 
(!! 
StatusCodes!! )
.!!) *
Status200OK!!* 5
)!!5 6
]!!6 7
["" 	 
ProducesResponseType""	 
("" 
StatusCodes"" )
."") *
Status400BadRequest""* =
)""= >
]""> ?
public## 
async## 
Task## 
<## 
IActionResult## '
>##' (#
EnviarDatosNeonatologia##) @
(##@ A
[##A B
FromBody##B J
]##J K
Request##L S
.##S T
Roe##T W
pRoe##X \
)##\ ]
{$$ 	
try%% 
{&& 
var'' 
LTabla'' 
='' 
new''  
TablasAD''! )
('') *
)''* +
.''+ ,
Sp_Tablas_Consulta'', >
(''> ?
new''? B
TablasE''C J
(''J K
$str''K M
,''M N
$str''O Q
,''Q R
$num''S T
,''T U
$num''U V
,''V W
$num''X Z
)''Z [
)''[ \
;''\ ]
var(( 
urlEndPoint(( 
=((  !
LTabla((" (
[((( )
$num(() *
]((* +
.((+ ,
Nombre((, 2
;((2 3
ServicePointManager** #
.**# $
SecurityProtocol**$ 4
=**5 6 
SecurityProtocolType**7 K
.**K L
Tls11**L Q
|**R S 
SecurityProtocolType**T h
.**h i
Tls12**i n
;**n o
using++ 
(++ 

HttpClient++ !
client++" (
=++) *
new+++ .

HttpClient++/ 9
(++9 :
)++: ;
)++; <
{,, 
var-- 
jsonData--  
=--! "
JsonConvert--# .
.--. /
SerializeObject--/ >
(--> ?
pRoe--? C
)--C D
;--D E
StringContent.. !
content.." )
=..* +
new.., /
StringContent..0 =
(..= >
jsonData..> F
,..F G
Encoding..H P
...P Q
UTF8..Q U
,..U V
$str..W i
)..i j
;..j k
using00 
(00 
var00 
request00 &
=00' (
new00) ,
HttpRequestMessage00- ?
(00? @

HttpMethod00@ J
.00J K
Put00K N
,00N O
urlEndPoint00P [
)00[ \
{00] ^
Content00_ f
=00g h
content00i p
}00q r
)00r s
{11 
var22 
response22 $
=22% &
await22' ,
client22- 3
.223 4
	SendAsync224 =
(22= >
request22> E
)22E F
;22F G
var44 
	respuesta44 %
=44& '
await44( -
response44. 6
.446 7
Content447 >
.44> ?
ReadAsStringAsync44? P
(44P Q
)44Q R
;44R S
return55 
Ok55 !
(55! "
	respuesta55" +
)55+ ,
;55, -
}66 
}77 
}88 
catch99 
(99 
	Exception99 
ex99 
)99  
{:: 
return;; 

BadRequest;; !
(;;! "
ex;;" $
.;;$ %
Message;;% ,
);;, -
;;;- .
}<< 
}== 	
}>> 
}?? «^
iD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Controllers\PrestacionesClinicaController.cs
	namespace 	
Api
 
. 
Clinica 
. 
Controllers !
{		 
[

 
ApiController

 
]

 
[ 
Route 

(
 
$str  
)  !
]! "
public 

class )
PrestacionesClinicaController .
:/ 0
ControllerBase1 ?
{ 
Config 
_config 
= 
new 
Config #
(# $
)$ %
;% &
[ 	
Route	 
( 
$str 1
)1 2
]2 3
[ 	
HttpPost	 
] 
[ 	 
ProducesResponseType	 
( 
StatusCodes )
.) *
Status200OK* 5
)5 6
]6 7
[ 	 
ProducesResponseType	 
( 
StatusCodes )
.) *
Status400BadRequest* =
)= >
]> ?
public 
async 
Task 
< 
IActionResult '
>' ( 
Listado_Prestaciones) =
(= >
[> ?
FromBody? G
]G H
PrestacionBusqEI X
busqY ]
)] ^
{ 	
try 
{ 
string 
token 
= 
Criptography +
.+ ,"
DecryptConectionString, B
(B C
RequestC J
.J K
HeadersK R
.R S
WhereS X
(X Y
xY Z
=>[ ]
x^ _
._ `
Key` c
==d f
$strg v
)v w
.w x
FirstOrDefault	x Ü
(
Ü á
)
á à
.
à â
Value
â é
)
é è
;
è ê
if 
( 
token 
== 
_config $
.$ %
Key% (
)( )
{ 
var 
	resultado !
=" #
await$ )
new* -
PrestacionesClinica. A
(A B
)B C
.C D 
Listado_PrestacionesD X
(X Y
busqY ]
)] ^
;^ _
if 
( 
	resultado !
.! "

IdRegistro" ,
==- /
-0 1
$num1 2
)2 3
{ 
return 

BadRequest )
() *
	resultado* 3
.3 4
Mensaje4 ;
); <
;< =
} 
return   
Ok   
(   
	resultado   '
)  ' (
;  ( )
}!! 
else"" 
{## 
return$$ 

BadRequest$$ %
($$% &
$str$$& 7
)$$7 8
;$$8 9
}%% 
}&& 
catch'' 
('' 
	Exception'' 
ex'' 
)''  
{(( 
return)) 

BadRequest)) !
())! "
ex))" $
.))$ %
Message))% ,
))), -
;))- .
}** 
}++ 	
[-- 	
Route--	 
(-- 
$str-- .
)--. /
]--/ 0
[.. 	
HttpPost..	 
].. 
[// 	 
ProducesResponseType//	 
(// 
StatusCodes// )
.//) *
Status200OK//* 5
)//5 6
]//6 7
[00 	 
ProducesResponseType00	 
(00 
StatusCodes00 )
.00) *
Status400BadRequest00* =
)00= >
]00> ?
public11 
async11 
Task11 
<11 
IActionResult11 '
>11' (
Listado_Tarifario11) :
(11: ;
[11; <
FromBody11< D
]11D E
PrestacionBusqE11F U
busq11V Z
)11Z [
{22 	
try33 
{44 
string55 
token55 
=55 
Criptography55 +
.55+ ,"
DecryptConectionString55, B
(55B C
Request55C J
.55J K
Headers55K R
.55R S
Where55S X
(55X Y
x55Y Z
=>55[ ]
x55^ _
.55_ `
Key55` c
==55d f
$str55g v
)55v w
.55w x
FirstOrDefault	55x Ü
(
55Ü á
)
55á à
.
55à â
Value
55â é
)
55é è
;
55è ê
if66 
(66 
token66 
==66 
_config66 $
.66$ %
Key66% (
)66( )
{77 
var88 
	resultado88 !
=88" #
await88$ )
new88* -
PrestacionesClinica88. A
(88A B
)88B C
.88C D
Listado_Tarifario88D U
(88U V
busq88V Z
)88Z [
;88[ \
if99 
(99 
	resultado99 !
.99! "

IdRegistro99" ,
==99- /
-990 1
$num991 2
)992 3
{:: 
return;; 

BadRequest;; )
(;;) *
	resultado;;* 3
.;;3 4
Mensaje;;4 ;
);;; <
;;;< =
}<< 
return== 
Ok== 
(== 
	resultado== '
)==' (
;==( )
}>> 
else?? 
{@@ 
returnAA 

BadRequestAA %
(AA% &
$strAA& 7
)AA7 8
;AA8 9
}BB 
}CC 
catchDD 
(DD 
	ExceptionDD 
exDD 
)DD  
{EE 
returnFF 

BadRequestFF !
(FF! "
exFF" $
.FF$ %
MessageFF% ,
)FF, -
;FF- .
}GG 
}HH 	
[LL 	
RouteLL	 
(LL 
$strLL 5
)LL5 6
]LL6 7
[MM 	
HttpPostMM	 
]MM 
[NN 	 
ProducesResponseTypeNN	 
(NN 
StatusCodesNN )
.NN) *
Status200OKNN* 5
)NN5 6
]NN6 7
[OO 	 
ProducesResponseTypeOO	 
(OO 
StatusCodesOO )
.OO) *
Status400BadRequestOO* =
)OO= >
]OO> ?
publicPP 
asyncPP 
TaskPP 
<PP 
IActionResultPP '
>PP' ($
Listado_PrestacionTarifaPP) A
(PPA B
[PPB C
FromBodyPPC K
]PPK L
PrestacionBusqEPPM \
busqPP] a
)PPa b
{QQ 	
tryRR 
{SS 
stringTT 
tokenTT 
=TT 
CriptographyTT +
.TT+ ,"
DecryptConectionStringTT, B
(TTB C
RequestTTC J
.TTJ K
HeadersTTK R
.TTR S
WhereTTS X
(TTX Y
xTTY Z
=>TT[ ]
xTT^ _
.TT_ `
KeyTT` c
==TTd f
$strTTg v
)TTv w
.TTw x
FirstOrDefault	TTx Ü
(
TTÜ á
)
TTá à
.
TTà â
Value
TTâ é
)
TTé è
;
TTè ê
ifUU 
(UU 
tokenUU 
==UU 
_configUU $
.UU$ %
KeyUU% (
)UU( )
{VV 
varWW 
	resultadoWW !
=WW" #
awaitWW$ )
newWW* -
PrestacionesClinicaWW. A
(WWA B
)WWB C
.WWC D'
Listado_PrestacionTarifarioWWD _
(WW_ `
busqWW` d
)WWd e
;WWe f
ifXX 
(XX 
	resultadoXX !
.XX! "

IdRegistroXX" ,
==XX- /
-XX0 1
$numXX1 2
)XX2 3
{YY 
returnZZ 

BadRequestZZ )
(ZZ) *
	resultadoZZ* 3
.ZZ3 4
MensajeZZ4 ;
)ZZ; <
;ZZ< =
}[[ 
return\\ 
Ok\\ 
(\\ 
	resultado\\ '
)\\' (
;\\( )
}]] 
else^^ 
{__ 
return`` 

BadRequest`` %
(``% &
$str``& 7
)``7 8
;``8 9
}aa 
}bb 
catchcc 
(cc 
	Exceptioncc 
excc 
)cc  
{dd 
returnee 

BadRequestee !
(ee! "
exee" $
.ee$ %
Messageee% ,
)ee, -
;ee- .
}ff 
}gg 	
[ii 	
Routeii	 
(ii 
$strii :
)ii: ;
]ii; <
[jj 	
HttpPostjj	 
]jj 
[kk 	 
ProducesResponseTypekk	 
(kk 
StatusCodeskk )
.kk) *
Status200OKkk* 5
)kk5 6
]kk6 7
[ll 	 
ProducesResponseTypell	 
(ll 
StatusCodesll )
.ll) *
Status400BadRequestll* =
)ll= >
]ll> ?
publicmm 
asyncmm 
Taskmm 
<mm 
IActionResultmm '
>mm' ()
Registrar_TarifarioPrestacionmm) F
(mmF G
[mmG H
FromBodymmH P
]mmP Q
ListmmR V
<mmV W 
PrestacionesClinicaEmmW k
>mmk l
objprestacionmmm z
)mmz {
{nn 	
tryoo 
{pp 
stringqq 
tokenqq 
=qq 
Criptographyqq +
.qq+ ,"
DecryptConectionStringqq, B
(qqB C
RequestqqC J
.qqJ K
HeadersqqK R
.qqR S
WhereqqS X
(qqX Y
xqqY Z
=>qq[ ]
xqq^ _
.qq_ `
Keyqq` c
==qqd f
$strqqg v
)qqv w
.qqw x
FirstOrDefault	qqx Ü
(
qqÜ á
)
qqá à
.
qqà â
Value
qqâ é
)
qqé è
;
qqè ê
ifrr 
(rr 
tokenrr 
==rr 
_configrr $
.rr$ %
Keyrr% (
)rr( )
{ss 
inttt 
Idusertt 
=tt  
Converttt! (
.tt( )
ToInt32tt) 0
(tt0 1
Criptographytt1 =
.tt= >"
DecryptConectionStringtt> T
(ttT U
RequestttU \
.tt\ ]
Headerstt] d
.ttd e
Wherette j
(ttj k
xttk l
=>ttm o
xttp q
.ttq r
Keyttr u
==ttv x
$str	tty É
)
ttÉ Ñ
.
ttÑ Ö
FirstOrDefault
ttÖ ì
(
ttì î
)
ttî ï
.
ttï ñ
Value
ttñ õ
)
ttõ ú
)
ttú ù
;
ttù û
varuu 
insertaruu  
=uu! "
awaituu# (
newuu) ,
PrestacionesClinicauu- @
(uu@ A
)uuA B
.uuB C%
Registro_PrestacionTarifauuC \
(uu\ ]
objprestacionuu] j
,uuj k
Iduseruul r
)uur s
;uus t
ifvv 
(vv 
insertarvv  
.vv  !

IdRegistrovv! +
==vv, .
-vv/ 0
$numvv0 1
)vv1 2
{ww 
returnxx 

BadRequestxx )
(xx) *
insertarxx* 2
.xx2 3
Mensajexx3 :
)xx: ;
;xx; <
}yy 
elsezz 
{{{ 
return|| 
Ok|| !
(||! "
insertar||" *
)||* +
;||+ ,
}}} 
}~~ 
else 
{
ÄÄ 
return
ÅÅ 

BadRequest
ÅÅ %
(
ÅÅ% &
$str
ÅÅ& 7
)
ÅÅ7 8
;
ÅÅ8 9
}
ÇÇ 
}
ÉÉ 
catch
ÑÑ 
(
ÑÑ 
	Exception
ÑÑ 
ex
ÑÑ 
)
ÑÑ  
{
ÖÖ 
return
ÜÜ 

BadRequest
ÜÜ !
(
ÜÜ! "
ex
ÜÜ" $
.
ÜÜ$ %
Message
ÜÜ% ,
)
ÜÜ, -
;
ÜÜ- .
}
áá 
}
àà 	
}
ââ 
}ää «È
kD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Controllers\KardexHospitalizacionController.cs
	namespace

 	
Api


 
.

 
Clinica

 
.

 
Controllers

 !
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str "
)" #
]# $
public 
class +
KardexHospitalizacionController -
:. /
ControllerBase0 >
{ 
Hospital 
_bl 
= 
new 
Hospital #
(# $
)$ %
;% &
Config 
_config 
= 
new 
Config #
(# $
)$ %
;% &
[ 	
Route	 
( 
$str ;
); <
]< =
[ 	
HttpGet	 
] 
public 
List 
< 
	HospitalE 
> ,
 Listado_PacientesHospitaliazados ?
(? @
string@ F
OrderG L
,L M
stringN T
FilaU Y
,Y Z
string[ a
Atencionb j
,j k
stringl r
Busquedas {
){ |
{ 	
try 
{ 
string 
token 
= 
Criptography +
.+ ,"
DecryptConectionString, B
(B C
RequestC J
.J K
HeadersK R
.R S
WhereS X
(X Y
xY Z
=>[ ]
x^ _
._ `
Key` c
==d f
$strg v
)v w
.w x
FirstOrDefault	x Ü
(
Ü á
)
á à
.
à â
Value
â é
)
é è
;
ê ë
if 
( 
token 
== 
_config $
.$ %
Key% (
)( )
{ 
int 
_order 
=  
int! $
.$ %
Parse% *
(* +
Criptography+ 7
.7 8"
DecryptConectionString8 N
(N O
OrderO T
)T U
)U V
;V W
int 
_Fila 
= 
int  #
.# $
Parse$ )
() *
Criptography* 6
.6 7"
DecryptConectionString7 M
(M N
FilaN R
)R S
)S T
;T U
string   
	_Atencion   $
=  % &
Criptography  ' 3
.  3 4"
DecryptConectionString  4 J
(  J K
Atencion  K S
)  S T
;  T U
string!! 
	_Busqueda!! $
=!!% &
Criptography!!' 3
.!!3 4"
DecryptConectionString!!4 J
(!!J K
Busqueda!!K S
.!!S T
Replace!!T [
(!![ \
$str!!\ _
,!!_ `
$str!!` c
)!!c d
)!!d e
;!!e f
return"" 
_bl"" 
."" :
.Listado_PacientesHospitaliazados_Coincidencias"" M
(""M N
_order""N T
,""T U
_Fila""V [
,""[ \
	_Atencion""] f
,""f g
	_Busqueda""h q
)""q r
;""r s
}## 
else$$ 
{$$ 
return$$ 
new$$ !
List$$" &
<$$& '
	HospitalE$$' 0
>$$0 1
($$1 2
)$$2 3
;$$3 4
}$$5 6
}%% 
catch&& 
(&& 
	Exception&& 
ex&& 
)&&  
{'' 
return(( 
new(( 
List(( 
<((  
	HospitalE((  )
>(() *
(((* +
)((+ ,
;((, -
})) 
}** 	
[,, 	
Route,,	 
(,, 
$str,, 7
),,7 8
],,8 9
[-- 	
HttpGet--	 
]-- 
public.. 
	HospitalE.. '
Datos_PacienteHospitalizado.. 4
(..4 5
string..5 ;
_Key..< @
)..@ A
{// 	
try00 
{00 
string11 
token11 
=11 
Criptography11 +
.11+ ,"
DecryptConectionString11, B
(11B C
Request11C J
.11J K
Headers11K R
.11R S
Where11S X
(11X Y
x11Y Z
=>11[ ]
x11^ _
.11_ `
Key11` c
==11d f
$str11g v
)11v w
.11w x
FirstOrDefault	11x Ü
(
11Ü á
)
11á à
.
11à â
Value
11â é
)
11é è
;
11è ê
if22 
(22 
token22 
==22 
_config22 $
.22$ %
Key22% (
)22( )
{33 
string44 
codigo44 !
=44" #
_Key44$ (
.44( )
Replace44) 0
(440 1
$str441 4
,444 5
$str446 9
)449 :
;44: ;
string55 
CodAtencion55 &
=55' (
Criptography55) 5
.555 6"
DecryptConectionString556 L
(55L M
codigo55M S
)55S T
;55T U
int66 
order66 
=66 
$num66  !
;66! "
int66# &
n_fila66' -
=66. /
$num660 1
;661 2
string663 9
Busq66: >
=66? @
$str66A C
;66C D
return77 
_bl77 
.77 '
Datos_PacienteHospitalizado77 :
(77: ;
order77; @
,77@ A
n_fila77B H
,77H I
CodAtencion77J U
,77U V
Busq77W [
)77[ \
;77\ ]
}88 
else99 
{99 
return:: 
new:: 
	HospitalE:: (
(::( )
)::) *
;::* +
};; 
}<< 
catch== 
(== 
	Exception== 
ex== 
)==  
{>> 
return?? 
new?? 
	HospitalE?? $
(??$ %
)??% &
;??& '
}@@ 
}AA 	
[CC 	
RouteCC	 
(CC 
$strCC 7
)CC7 8
]CC8 9
[DD 	
HttpGetDD	 
]DD 
publicEE 
ListEE 
<EE  
IndicacionesMedicasEEE (
>EE( )'
PacienteIndicacionesMedicasEE* E
(EEE F
stringEEF L
_KeyEEM Q
)EEQ R
{FF 	
tryGG 
{GG 
stringHH 
tokenHH 
=HH 
CriptographyHH +
.HH+ ,"
DecryptConectionStringHH, B
(HHB C
RequestHHC J
.HHJ K
HeadersHHK R
.HHR S
WhereHHS X
(HHX Y
xHHY Z
=>HH[ ]
xHH^ _
.HH_ `
KeyHH` c
==HHd f
$strHHg v
)HHv w
.HHw x
FirstOrDefault	HHx Ü
(
HHÜ á
)
HHá à
.
HHà â
Value
HHâ é
)
HHé è
;
HHè ê
ifII 
(II 
tokenII 
==II 
_configII $
.II$ %
KeyII% (
)II( )
{JJ 
stringKK 
codigoKK !
=KK" #
_KeyKK$ (
.KK( )
ReplaceKK) 0
(KK0 1
$strKK1 4
,KK4 5
$strKK6 9
)KK9 :
;KK: ;
stringLL 
CodAtencionLL &
=LL' (
CriptographyLL) 5
.LL5 6"
DecryptConectionStringLL6 L
(LLL M
codigoLLM S
)LLS T
;LLT U
intMM 
orderMM 
=MM 
$numMM  !
;MM! "
intMM# &
n_filaMM' -
=MM. /
$numMM0 1
;MM1 2
stringMM3 9
BusqMM: >
=MM? @
$strMMA C
;MMC D
returnNN 
_blNN 
.NN '
Listado_IndicacionesMedicasNN :
(NN: ;
orderNN; @
,NN@ A
n_filaNNB H
,NNH I
CodAtencionNNJ U
,NNU V
BusqNNW [
)NN[ \
;NN\ ]
}OO 
elsePP 
{PP 
returnQQ 
newQQ 
ListQQ #
<QQ# $ 
IndicacionesMedicasEQQ$ 8
>QQ8 9
(QQ9 :
)QQ: ;
;QQ; <
}RR 
}SS 
catchTT 
(TT 
	ExceptionTT 
exTT 
)TT  
{TT! "
returnTT# )
newTT* -
ListTT. 2
<TT2 3 
IndicacionesMedicasETT3 G
>TTG H
(TTH I
)TTI J
;TTJ K
}TTL M
}UU 	
[WW 	
RouteWW	 
(WW 
$strWW @
)WW@ A
]WWA B
[XX 	
HttpGetXX	 
]XX 
publicYY 
ListYY 
<YY &
IndicacionesMedicaDetalleEYY .
>YY. /-
!KardexHistoricoIndicacionesMedicaYY0 Q
(YYQ R
stringYYR X
_KeyYYY ]
)YY] ^
{ZZ 	
try[[ 
{\\ 
string]] 
token]] 
=]] 
Criptography]] +
.]]+ ,"
DecryptConectionString]], B
(]]B C
Request]]C J
.]]J K
Headers]]K R
.]]R S
Where]]S X
(]]X Y
x]]Y Z
=>]][ ]
x]]^ _
.]]_ `
Key]]` c
==]]d f
$str]]g v
)]]v w
.]]w x
FirstOrDefault	]]x Ü
(
]]Ü á
)
]]á à
.
]]à â
Value
]]â é
)
]]é è
;
]]è ê
if^^ 
(^^ 
token^^ 
==^^ 
_config^^ $
.^^$ %
Key^^% (
)^^( )
{__ 
string`` 
codigo`` !
=``" #
_Key``$ (
.``( )
Replace``) 0
(``0 1
$str``1 4
,``4 5
$str``6 9
)``9 :
;``: ;
stringaa 
CodAtencionaa &
=aa' (
Criptographyaa) 5
.aa5 6"
DecryptConectionStringaa6 L
(aaL M
codigoaaM S
)aaS T
;aaT U
intbb 
orderbb 
=bb 
$numbb  !
;bb! "
intbb# &
n_filabb' -
=bb. /
$numbb0 1
;bb1 2
stringbb3 9
Busqbb: >
=bb? @
$strbbA C
;bbC D
returncc 
_blcc 
.cc 6
*Listado_KardexHistoricoIndicacionesMedicascc I
(ccI J
orderccJ O
,ccO P
n_filaccQ W
,ccW X
CodAtencionccY d
,ccd e
Busqccf j
)ccj k
;cck l
}dd 
elseee 
{ee 
returnff 
newff 
Listff #
<ff# $&
IndicacionesMedicaDetalleEff$ >
>ff> ?
(ff? @
)ff@ A
;ffA B
}gg 
}hh 
catchii 
(ii 
	Exceptionii 
exii 
)ii  
{ii! "
returnii# )
newii* -
Listii. 2
<ii2 3&
IndicacionesMedicaDetalleEii3 M
>iiM N
(iiN O
)iiO P
;iiP Q
}iiR S
}jj 	
[mm 	
Routemm	 
(mm 
$strmm A
)mmA B
]mmB C
[nn 	
HttpGetnn	 
]nn 
publicoo 
Listoo 
<oo &
IndicacionesMedicaDetalleEoo .
>oo. /.
"KardexHistoricoIndicacionesMedica2oo0 R
(ooR S
stringooS Y
_KeyooZ ^
,oo^ _
stringoo` f
valoroog l
)ool m
{pp 	
tryqq 
{rr 
stringss 
tokenss 
=ss 
Criptographyss +
.ss+ ,"
DecryptConectionStringss, B
(ssB C
RequestssC J
.ssJ K
HeadersssK R
.ssR S
WheressS X
(ssX Y
xssY Z
=>ss[ ]
xss^ _
.ss_ `
Keyss` c
==ssd f
$strssg v
)ssv w
.ssw x
FirstOrDefault	ssx Ü
(
ssÜ á
)
ssá à
.
ssà â
Value
ssâ é
)
ssé è
;
ssè ê
iftt 
(tt 
tokentt 
==tt 
_configtt $
.tt$ %
Keytt% (
)tt( )
{uu 
stringvv 
codigovv !
=vv" #
_Keyvv$ (
.vv( )
Replacevv) 0
(vv0 1
$strvv1 4
,vv4 5
$strvv6 9
)vv9 :
;vv: ;
stringww 
CodAtencionww &
=ww' (
Criptographyww) 5
.ww5 6"
DecryptConectionStringww6 L
(wwL M
codigowwM S
)wwS T
;wwT U
stringxx 
Busqxx 
=xx  !
Criptographyxx" .
.xx. /"
DecryptConectionStringxx/ E
(xxE F
valorxxF K
.xxK L
ReplacexxL S
(xxS T
$strxxT W
,xxW X
$strxxY \
)xx\ ]
)xx] ^
;xx^ _
intyy 
orderyy 
=yy 
$numyy  !
;yy! "
intyy# &
n_filayy' -
=yy. /
$numyy0 1
;yy1 2
returnzz 
_blzz 
.zz 6
*Listado_KardexHistoricoIndicacionesMedicaszz I
(zzI J
orderzzJ O
,zzO P
n_filazzQ W
,zzW X
CodAtencionzzY d
,zzd e
Busqzzf j
)zzj k
;zzk l
}{{ 
else|| 
{}} 
return~~ 
new~~ 
List~~ #
<~~# $&
IndicacionesMedicaDetalleE~~$ >
>~~> ?
(~~? @
)~~@ A
;~~A B
} 
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
ex
ÅÅ 
)
ÅÅ  
{
ÅÅ! "
return
ÇÇ 
new
ÇÇ 
List
ÇÇ 
<
ÇÇ  (
IndicacionesMedicaDetalleE
ÇÇ  :
>
ÇÇ: ;
(
ÇÇ; <
)
ÇÇ< =
;
ÇÇ= >
}
ÉÉ 
}
ÑÑ 	
[
ââ 	
Route
ââ	 
(
ââ 
$str
ââ J
)
ââJ K
]
ââK L
[
ää 	
HttpGet
ää	 
]
ää 
public
ãã 
List
ãã 
<
ãã !
ProgramacionKardexE
ãã '
>
ãã' (;
-KardexHistoricoPacienteHospitalarioPRogramado
ãã) V
(
ããV W
string
ããW ]
_Key
ãã^ b
)
ããb c
{
åå 	
try
çç 
{
éé 
string
èè 
token
èè 
=
èè 
Criptography
èè +
.
èè+ ,$
DecryptConectionString
èè, B
(
èèB C
Request
èèC J
.
èèJ K
Headers
èèK R
.
èèR S
Where
èèS X
(
èèX Y
x
èèY Z
=>
èè[ ]
x
èè^ _
.
èè_ `
Key
èè` c
==
èèd f
$str
èèg v
)
èèv w
.
èèw x
FirstOrDefaultèèx Ü
(èèÜ á
)èèá à
.èèà â
Valueèèâ é
)èèé è
;èèè ê
if
êê 
(
êê 
token
êê 
==
êê 
_config
êê $
.
êê$ %
Key
êê% (
)
êê( )
{
ëë 
string
íí 
codigo
íí !
=
íí" #
_Key
íí$ (
.
íí( )
Replace
íí) 0
(
íí0 1
$str
íí1 4
,
íí4 5
$str
íí6 9
)
íí9 :
;
íí: ;
string
ìì 
CodAtencion
ìì &
=
ìì' (
Criptography
ìì) 5
.
ìì5 6$
DecryptConectionString
ìì6 L
(
ììL M
codigo
ììM S
)
ììS T
;
ììT U
int
îî 
order
îî 
=
îî 
$num
îî  !
;
îî! "
int
îî# &
n_fila
îî' -
=
îî. /
$num
îî0 1
;
îî1 2
string
îî3 9
Busq
îî: >
=
îî? @
$str
îîA C
;
îîC D
return
ïï 
_bl
ïï 
.
ïï ;
-Listado_KardexHistoricoIndicacionesProgramada
ïï L
(
ïïL M
order
ïïM R
,
ïïR S
n_fila
ïïT Z
,
ïïZ [
CodAtencion
ïï\ g
,
ïïg h
Busq
ïïi m
)
ïïm n
;
ïïn o
}
ññ 
else
óó 
{
òò 
return
ôô 
new
ôô 
List
ôô #
<
ôô# $!
ProgramacionKardexE
ôô$ 7
>
ôô7 8
(
ôô8 9
)
ôô9 :
;
ôô: ;
}
öö 
}
õõ 
catch
úú 
(
úú 
	Exception
úú 
ex
úú 
)
úú  
{
úú! "
return
úú# )
new
úú* -
List
úú. 2
<
úú2 3!
ProgramacionKardexE
úú3 F
>
úúF G
(
úúG H
)
úúH I
;
úúI J
}
úúK L
}
ùù 	
[
üü 	
Route
üü	 
(
üü 
$str
üü 1
)
üü1 2
]
üü2 3
[
†† 	
HttpGet
††	 
]
†† 
public
°° 
List
°° 
<
°° 
PisoE
°° 
>
°° #
Listado_PacienteXPiso
°° 0
(
°°0 1
string
°°1 7
_Key
°°8 <
)
°°< =
{
¢¢ 	
try
££ 
{
§§ 
string
•• 
token
•• 
=
•• 
Criptography
•• +
.
••+ ,$
DecryptConectionString
••, B
(
••B C
Request
••C J
.
••J K
Headers
••K R
.
••R S
Where
••S X
(
••X Y
x
••Y Z
=>
••[ ]
x
••^ _
.
••_ `
Key
••` c
==
••d f
$str
••g v
)
••v w
.
••w x
FirstOrDefault••x Ü
(••Ü á
)••á à
.••à â
Value••â é
)••é è
;••è ê
if
¶¶ 
(
¶¶ 
token
¶¶ 
==
¶¶ 
_config
¶¶ $
.
¶¶$ %
Key
¶¶% (
)
¶¶( )
{
ßß 
string
®® 
codigo
®® !
=
®®" #
_Key
®®$ (
.
®®( )
Replace
®®) 0
(
®®0 1
$str
®®1 4
,
®®4 5
$str
®®6 9
)
®®9 :
;
®®: ;
string
©© 
CodAtencion
©© &
=
©©' (
$str
©©) +
;
©©+ ,
int
™™ 
order
™™ 
=
™™ 
$num
™™  !
;
™™! "
int
™™# &
n_fila
™™' -
=
™™. /
$num
™™0 1
;
™™1 2
string
™™3 9
Busq
™™: >
=
™™? @
Criptography
™™A M
.
™™M N$
DecryptConectionString
™™N d
(
™™d e
codigo
™™e k
)
™™k l
;
™™l m
return
´´ 
_bl
´´ 
.
´´ #
Listar_piso_x_usuario
´´ 4
(
´´4 5
order
´´5 :
,
´´: ;
n_fila
´´< B
,
´´B C
CodAtencion
´´D O
,
´´O P
Busq
´´Q U
)
´´U V
;
´´V W
}
¨¨ 
else
≠≠ 
{
ÆÆ 
return
ØØ 
new
ØØ 
List
ØØ #
<
ØØ# $
PisoE
ØØ$ )
>
ØØ) *
(
ØØ* +
)
ØØ+ ,
;
ØØ, -
}
∞∞ 
}
±± 
catch
≤≤ 
(
≤≤ 
	Exception
≤≤ 
ex
≤≤ 
)
≤≤  
{
≤≤! "
return
≤≤# )
new
≤≤* -
List
≤≤. 2
<
≤≤2 3
PisoE
≤≤3 8
>
≤≤8 9
(
≤≤9 :
)
≤≤: ;
;
≤≤; <
}
≤≤= >
}
≥≥ 	
[
µµ 	
Route
µµ	 
(
µµ 
$str
µµ 3
)
µµ3 4
]
µµ4 5
[
∂∂ 	
HttpPost
∂∂	 
]
∂∂ 
public
∑∑ 
dynamic
∑∑ 9
+Registrar_Kardex_datosHospitalario_Paciente
∑∑ B
(
∑∑B C!
KardexHospitalarioE
∑∑C V
_obj
∑∑W [
)
∑∑[ \
{
∏∏ 	
try
∫∫ 
{
∫∫ 
string
ªª 
_Id
ªª 
=
ªª 
Request
ªª $
.
ªª$ %
Headers
ªª% ,
.
ªª, -
Where
ªª- 2
(
ªª2 3
x
ªª3 4
=>
ªª5 7
x
ªª8 9
.
ªª9 :
Key
ªª: =
==
ªª> @
$str
ªªA P
)
ªªP Q
.
ªªQ R
FirstOrDefault
ªªR `
(
ªª` a
)
ªªa b
.
ªªb c
Value
ªªc h
;
ªªh i
if
ºº 
(
ºº 
string
ºº 
.
ºº  
IsNullOrWhiteSpace
ºº -
(
ºº- .
_Id
ºº. 1
)
ºº1 2
)
ºº2 3
{
ΩΩ 
RespuestaJsonE
ææ "
_Rjson
ææ# )
=
ææ* +
new
ææ, /
RespuestaJsonE
ææ0 >
(
ææ> ?
)
ææ? @
;
ææ@ A
_Rjson
øø 
.
øø 
exito
øø  
=
øø! "
false
øø# (
;
øø( )
_Rjson
¿¿ 
.
¿¿ 
message
¿¿ "
=
¿¿# $
$str
¿¿% G
;
¿¿G H
_Rjson
¡¡ 
.
¡¡ 
status
¡¡ !
=
¡¡" #
$str
¡¡$ +
;
¡¡+ ,
return
¬¬ 
_Rjson
¬¬ !
;
¬¬! "
}
√√ 
string
ƒƒ 
token
ƒƒ 
=
ƒƒ 
Criptography
ƒƒ +
.
ƒƒ+ ,$
DecryptConectionString
ƒƒ, B
(
ƒƒB C
_Id
ƒƒC F
)
ƒƒF G
;
ƒƒG H
if
∆∆ 
(
∆∆ 
token
∆∆ 
==
∆∆ 
_config
∆∆ $
.
∆∆$ %
Key
∆∆% (
)
∆∆( )
{
«« 
return
»» 
_bl
»» 
.
»» 9
+Registrar_Kardex_datosHospitalario_Paciente
»» J
(
»»J K
_obj
»»K O
)
»»O P
;
»»P Q
}
…… 
else
   
{
ÀÀ 
RespuestaJsonE
ÃÃ "
_Rjson
ÃÃ# )
=
ÃÃ* +
new
ÃÃ, /
RespuestaJsonE
ÃÃ0 >
(
ÃÃ> ?
)
ÃÃ? @
;
ÃÃ@ A
_Rjson
ÕÕ 
.
ÕÕ 
exito
ÕÕ  
=
ÕÕ! "
false
ÕÕ# (
;
ÕÕ( )
_Rjson
ŒŒ 
.
ŒŒ 
message
ŒŒ "
=
ŒŒ# $
$str
ŒŒ% G
;
ŒŒG H
return
œœ 
_Rjson
œœ !
;
œœ! "
}
–– 
}
—— 
catch
““ 
(
““ 
	Exception
““ 
ex
““ 
)
““  
{
”” 
RespuestaJsonE
‘‘ 
_Rjson
‘‘ %
=
‘‘& '
new
‘‘( +
RespuestaJsonE
‘‘, :
(
‘‘: ;
)
‘‘; <
;
‘‘< =
_Rjson
’’ 
.
’’ 
exito
’’ 
=
’’ 
false
’’ $
;
’’$ %
_Rjson
÷÷ 
.
÷÷ 
message
÷÷ 
=
÷÷  
$str
÷÷! C
;
÷÷C D
return
◊◊ 
_Rjson
◊◊ 
;
◊◊ 
}
ÿÿ 
}
ŸŸ 	
[
€€ 	
Route
€€	 
(
€€ 
$str
€€ 2
)
€€2 3
]
€€3 4
[
‹‹ 	
HttpPost
‹‹	 
]
‹‹ 
public
›› 
dynamic
›› 8
*Registrar_Kardex_DatosHospitalario_Detalle
›› A
(
››A B"
IndicacionesMedicasE
››B V
_obj
››W [
)
››[ \
{
ﬁﬁ 	
try
ﬂﬂ 
{
ﬂﬂ 
string
‡‡ 
_Id
‡‡ 
=
‡‡ 
Request
‡‡ $
.
‡‡$ %
Headers
‡‡% ,
.
‡‡, -
Where
‡‡- 2
(
‡‡2 3
x
‡‡3 4
=>
‡‡5 7
x
‡‡8 9
.
‡‡9 :
Key
‡‡: =
==
‡‡> @
$str
‡‡A P
)
‡‡P Q
.
‡‡Q R
FirstOrDefault
‡‡R `
(
‡‡` a
)
‡‡a b
.
‡‡b c
Value
‡‡c h
;
‡‡h i
if
·· 
(
·· 
string
·· 
.
··  
IsNullOrWhiteSpace
·· -
(
··- .
_Id
··. 1
)
··1 2
)
··2 3
{
‚‚ 
RespuestaJsonE
„„ "
_Rjson
„„# )
=
„„* +
new
„„, /
RespuestaJsonE
„„0 >
(
„„> ?
)
„„? @
;
„„@ A
_Rjson
‰‰ 
.
‰‰ 
exito
‰‰  
=
‰‰! "
false
‰‰# (
;
‰‰( )
_Rjson
ÂÂ 
.
ÂÂ 
message
ÂÂ "
=
ÂÂ# $
$str
ÂÂ% G
;
ÂÂG H
return
ÊÊ 
_Rjson
ÊÊ !
;
ÊÊ! "
}
ÁÁ 
string
ËË 
token
ËË 
=
ËË 
Criptography
ËË +
.
ËË+ ,$
DecryptConectionString
ËË, B
(
ËËB C
_Id
ËËC F
)
ËËF G
;
ËËG H
if
ÈÈ 
(
ÈÈ 
token
ÈÈ 
==
ÈÈ 
_config
ÈÈ $
.
ÈÈ$ %
Key
ÈÈ% (
)
ÈÈ( )
{
ÍÍ 
return
ÎÎ 
_bl
ÎÎ 
.
ÎÎ 9
+Registrar_kardex_datosHospitalarios_Detalle
ÎÎ J
(
ÎÎJ K
_obj
ÎÎK O
)
ÎÎO P
;
ÎÎP Q
}
ÏÏ 
else
ÌÌ 
{
ÓÓ 
RespuestaJsonE
ÔÔ "
_Rjson
ÔÔ# )
=
ÔÔ* +
new
ÔÔ, /
RespuestaJsonE
ÔÔ0 >
(
ÔÔ> ?
)
ÔÔ? @
;
ÔÔ@ A
_Rjson
 
.
 
exito
  
=
! "
false
# (
;
( )
_Rjson
ÒÒ 
.
ÒÒ 
message
ÒÒ "
=
ÒÒ# $
$str
ÒÒ% G
;
ÒÒG H
return
ÚÚ 
_Rjson
ÚÚ !
;
ÚÚ! "
}
ÛÛ 
}
ÙÙ 
catch
ıı 
(
ıı 
	Exception
ıı 
ex
ıı 
)
ıı  
{
ıı! "
RespuestaJsonE
ˆˆ 
_Rjson
ˆˆ %
=
ˆˆ& '
new
ˆˆ( +
RespuestaJsonE
ˆˆ, :
(
ˆˆ: ;
)
ˆˆ; <
;
ˆˆ< =
_Rjson
˜˜ 
.
˜˜ 
exito
˜˜ 
=
˜˜ 
false
˜˜ $
;
˜˜$ %
_Rjson
¯¯ 
.
¯¯ 
message
¯¯ 
=
¯¯  
$str
¯¯! C
;
¯¯C D
return
˘˘ 
_Rjson
˘˘ 
;
˘˘ 
}
˙˙ 
}
˚˚ 	
[
˝˝ 	
Route
˝˝	 
(
˝˝ 
$str
˝˝ :
)
˝˝: ;
]
˝˝; <
[
˛˛ 	
HttpPost
˛˛	 
]
˛˛ 
public
ˇˇ 
dynamic
ˇˇ +
Registrar_UsuarioPisoAtencion
ˇˇ 4
(
ˇˇ4 5
PisoE
ˇˇ5 :
_obj
ˇˇ; ?
)
ˇˇ? @
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ 
string
ÉÉ 
_Id
ÉÉ 
=
ÉÉ 
Request
ÉÉ $
.
ÉÉ$ %
Headers
ÉÉ% ,
.
ÉÉ, -
Where
ÉÉ- 2
(
ÉÉ2 3
x
ÉÉ3 4
=>
ÉÉ5 7
x
ÉÉ8 9
.
ÉÉ9 :
Key
ÉÉ: =
==
ÉÉ> @
$str
ÉÉA P
)
ÉÉP Q
.
ÉÉQ R
FirstOrDefault
ÉÉR `
(
ÉÉ` a
)
ÉÉa b
.
ÉÉb c
Value
ÉÉc h
;
ÉÉh i
if
ÑÑ 
(
ÑÑ 
string
ÑÑ 
.
ÑÑ  
IsNullOrWhiteSpace
ÑÑ -
(
ÑÑ- .
_Id
ÑÑ. 1
)
ÑÑ1 2
)
ÑÑ2 3
{
ÖÖ 
RespuestaJsonE
ÜÜ "
_Rjson
ÜÜ# )
=
ÜÜ* +
new
ÜÜ, /
RespuestaJsonE
ÜÜ0 >
(
ÜÜ> ?
)
ÜÜ? @
;
ÜÜ@ A
_Rjson
áá 
.
áá 
exito
áá  
=
áá! "
false
áá# (
;
áá( )
_Rjson
àà 
.
àà 
message
àà "
=
àà# $
$str
àà% G
;
ààG H
return
ââ 
_Rjson
ââ !
;
ââ! "
}
ää 
string
ãã 
token
ãã 
=
ãã 
Criptography
ãã +
.
ãã+ ,$
DecryptConectionString
ãã, B
(
ããB C
_Id
ããC F
)
ããF G
;
ããG H
if
åå 
(
åå 
token
åå 
==
åå 
_config
åå $
.
åå$ %
Key
åå% (
)
åå( )
{
çç 
return
éé 
_bl
éé 
.
éé +
Registrar_UsuarioPisoAtencion
éé <
(
éé< =
_obj
éé= A
)
ééA B
;
ééB C
}
èè 
else
êê 
{
ëë 
RespuestaJsonE
íí "
_Rjson
íí# )
=
íí* +
new
íí, /
RespuestaJsonE
íí0 >
(
íí> ?
)
íí? @
;
íí@ A
_Rjson
ìì 
.
ìì 
exito
ìì  
=
ìì! "
false
ìì# (
;
ìì( )
_Rjson
îî 
.
îî 
message
îî "
=
îî# $
$str
îî% G
;
îîG H
return
ïï 
_Rjson
ïï !
;
ïï! "
}
ññ 
}
óó 
catch
òò 
(
òò 
	Exception
òò 
ex
òò 
)
òò  
{
ôô 
RespuestaJsonE
öö 
_Rjson
öö %
=
öö& '
new
öö( +
RespuestaJsonE
öö, :
(
öö: ;
)
öö; <
;
öö< =
_Rjson
õõ 
.
õõ 
exito
õõ 
=
õõ 
false
õõ $
;
õõ$ %
_Rjson
úú 
.
úú 
message
úú 
=
úú  
$str
úú! C
;
úúC D
return
ùù 
_Rjson
ùù 
;
ùù 
}
ûû 
}
üü 	
}
†† 
}°° √N
aD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Controllers\GestorColasController.cs
	namespace		 	
Api		
 
.		 
Clinica		 
.		 
Controllers		 !
{

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str %
)% &
]& '
public 

class !
GestorColasController &
:( )
ControllerBase* 8
{ 
CitasDisplay 
_objCN 
= 
new !
CitasDisplay" .
(. /
)/ 0
;0 1
Config 
_config 
= 
new 
Config #
(# $
)$ %
;% &
[ 	
Route	 
( 
$str %
)% &
]& '
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
CitasDisplayE' 4
>4 5
>5 6
ListarCitasDisplay7 I
(J K"
CitasDisplayJsonParamEK a
objParametrosb o
)o p
{ 	
try 
{ 
var 
Lista 
= 
await !
_objCN" (
.( )
CitasDisplay_Listar) <
(< =
objParametros= J
)J K
;K L
return$$ 
Ok$$ 
($$ 
Lista$$ 
)$$  
;$$  !
}%% 
catch&& 
(&& 
	Exception&& 
ex&& 
)&&  
{'' 
throw(( 
new(( 
	Exception(( #
(((# $
ex(($ &
.((& '
Message((' .
)((. /
;((/ 0
})) 
}** 	
[,, 	
HttpPost,,	 
],, 
[-- 	
Route--	 
(-- 
$str-- '
)--' (
]--( )
public.. 
async.. 
Task.. 
<.. 
ActionResult.. &
<..& '
CitasDisplayTicketE..' :
>..: ;
>..; <%
CitasDisplayTicket_Listar..= V
(..V W!
CitasTicketJsonParamE..W l
objParametros..m z
)..z {
{// 	
try00 
{11 
var22 
Lista22 
=22 
await22 !
_objCN22" (
.22( )%
CitasDisplayTicket_Listar22) B
(22B C
objParametros22C P
)22P Q
;22Q R
if33 
(33 
Lista33 
.33 

listaCitas33 $
!=33% '
null33( ,
)33, -
{44 
if55 
(55 
Lista55 
.55 

listaCitas55 (
.55( )
Count55) .
==55/ 1
$num552 3
)553 4
{66 
string77 
strfechaProxima77 .
=77/ 0
_objCN771 7
.777 8!
uspCitaGetProximaCita778 M
(77M N
objParametros77N [
)77[ \
;77\ ]
string88 
[88 
]88  
_resp88! &
=88' (
strfechaProxima88) 8
.888 9
Split889 >
(88? @
$char88@ C
)88C D
;88D E
if99 
(99 
_resp99 !
.99! "
Length99" (
==99) +
$num99, -
)99- .
return:: "

BadRequest::# -
(::- .
new::. 1
{::2 3
Codigo::4 :
=::; <
$str::= B
,::B C
Mensaje::D K
=::L M
_resp::N S
}::T U
)::U V
;::V W
else;; 
return<< "

BadRequest<<# -
(<<- .
new<<. 1
{<<2 3
Codigo<<4 :
=<<; <
$str<<= B
,<<B C
Mensaje<<D K
=<<L M
_resp<<N S
}<<T U
)<<U V
;<<V W
}== 
}>> 
return?? 
Ok?? 
(?? 
Lista?? 
)??  
;??  !
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
throwCC 
newCC 
	ExceptionCC #
(CC# $
exCC$ &
.CC& '
MessageCC' .
)CC. /
;CC/ 0
}DD 
}EE 	
[HH 	
HttpGetHH	 
]HH 
[II 	
RouteII	 
(II 
$strII #
)II# $
]II$ %
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
IActionResultJJ '
>JJ' (#
CitasPacienteCrearTurnoJJ) @
(JJ@ A
stringJJA G
id_citaJJH O
)JJO P
{KK 	
tryLL 
{MM 
varOO 
tokenOO 
=OO 
CriptographyOO (
.OO( )
DecryptStringAES256OO) <
(OO< =
RequestOO= D
.OOD E
HeadersOOE L
.OOL M
WhereOOM R
(OOR S
xOOS T
=>OOU W
xOOX Y
.OOY Z
KeyOOZ ]
==OO^ `
$strOOa w
)OOw x
.OOx y
FirstOrDefault	OOy á
(
OOá à
)
OOà â
.
OOâ ä
Value
OOä è
)
OOè ê
;
OOê ë
ifPP 
(PP 
tokenPP 
==PP 
_configPP $
.PP$ %

keySoftvanPP% /
)PP/ 0
{QQ 
intRR 
_idCitaRR 
=RR  !
intRR" %
.RR% &
ParseRR& +
(RR+ ,
CriptographyRR, 8
.RR8 9
DecryptStringAES256RR9 L
(RRL M
id_citaRRM T
.RRT U
ReplaceRRU \
(RR\ ]
$strRR] `
,RR` a
$strRRb e
)RRe f
)RRf g
)RRg h
;RRh i
CitasRegTurnoSS !
objCitasRegTurnoSS" 2
=SS3 4
_objCNSS5 ;
.SS; <"
GetCitasBMaticRegTurnoSS< R
(SSR S
_idCitaSSS Z
)SSZ [
;SS[ \
ifUU 
(UU 
objCitasRegTurnoUU (
.UU( )
localUU) .
!=UU/ 1
nullUU2 6
)UU6 7
{VV 
varZZ 

ApiBMacticZZ &
=ZZ' (
newZZ) , 
ConfigurationBuilderZZ- A
(ZZA B
)ZZB C
.ZZC D
AddJsonFileZZD O
(ZZO P
$strZZP b
)ZZb c
.ZZc d
BuildZZd i
(ZZi j
)ZZj k
.ZZk l

GetSectionZZl v
(ZZv w
$str	ZZw É
)
ZZÉ Ñ
[
ZZÑ Ö
$str
ZZÖ ó
]
ZZó ò
;
ZZò ô

RestClient\\ "
_cliente\\# +
=\\, -
new\\. 1

RestClient\\2 <
(\\< =

ApiBMactic\\= G
)\\G H
;\\H I
RestRequest]] #
_request]]$ ,
=]]- .
new]]/ 2
RestRequest]]3 >
(]]> ?
)]]? @
;]]@ A
_request^^  
.^^  !
Method^^! '
=^^( )
Method^^* 0
.^^0 1
Post^^1 5
;^^5 6
_request__  
.__  !
RequestFormat__! .
=__/ 0

DataFormat__1 ;
.__; <
Json__< @
;__@ A
_request``  
.``  !
AddJsonBody``! ,
(``, -
new``- 0
{aa 
localbb !
=bb" #
objCitasRegTurnobb$ 4
.bb4 5
localbb5 :
,bb: ;
sectorcc "
=cc# $
objCitasRegTurnocc% 5
.cc5 6
sectorcc6 <
,cc< =

codigoCitadd &
=dd' (
objCitasRegTurnodd) 9
.dd9 :

CodigoCitadd: D
,ddD E
nombreClienteee )
=ee* +
objCitasRegTurnoee, <
.ee< =
NombreClienteee= J
,eeJ K
especialidadff (
=ff) *
objCitasRegTurnoff+ ;
.ff; <
Especialidadff< H
,ffH I
codEspecialidadgg +
=gg, -
objCitasRegTurnogg. >
.gg> ?
CodEspecialidadgg? N
,ggN O
consultoriohh '
=hh( )
objCitasRegTurnohh* :
.hh: ;
Consultoriohh; F
,hhF G
horaCitaii $
=ii% &
objCitasRegTurnoii' 7
.ii7 8
HoraCitaii8 @
}jj 
)jj 
;jj 
RestResponsekk $
	_responsekk% .
=kk/ 0
awaitkk1 6
_clientekk7 ?
.kk? @
ExecuteAsynckk@ L
(kkL M
_requestkkM U
)kkU V
;kkV W
ifmm 
(mm 
	_responsemm %
.mm% &

StatusCodemm& 0
!=mm1 3
Systemmm4 :
.mm: ;
Netmm; >
.mm> ?
HttpStatusCodemm? M
.mmM N
OKmmN P
)mmP Q
{nn 
varoo 
codErroroo  (
=oo) *
	_responseoo+ 4
.oo4 5

StatusCodeoo5 ?
;oo? @
}qq 
returnss 
Okss !
(ss! "
	_responsess" +
.ss+ ,

StatusCodess, 6
)ss6 7
;ss7 8
}tt 
elseuu 
{vv 
returnww 

BadRequestww )
(ww) *
$strww* j
)wwj k
;wwk l
}xx 
}zz 
else{{ 
{|| 
return}} 

BadRequest}} %
(}}% &
$str}}& <
)}}< =
;}}= >
}~~ 
return 

BadRequest !
(! "
$str" b
)b c
;c d
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
ex
ÅÅ 
)
ÅÅ  
{
ÇÇ 
throw
ÉÉ 
new
ÉÉ 
	Exception
ÉÉ #
(
ÉÉ# $
)
ÉÉ$ %
;
ÉÉ% &
}
ÑÑ 
}
ÖÖ 	
}
ââ 
}ää »º
iD:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Controllers\EscalaEIndicacionesController.cs
	namespace		 	
Api		
 
.		 
Clinica		 
.		 
Controllers		 !
{

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 7
)7 8
]8 9
public 

class )
EscalaEIndicacionesController .
:. /
ControllerBase/ =
{ 
EscalaEIndicaciones 
_objCN "
=# $
new% (
EscalaEIndicaciones) <
(< =
)= >
;> ? 
EscalaEIndicacionesE 
_objEN #
=$ %
new& ) 
EscalaEIndicacionesE* >
(> ?
)? @
;@ A
Config 
_config 
= 
new 
Config #
(# $
)$ %
;% &
[ 	
Route	 
( 
$str ,
), -
]- .
[ 	
HttpGet	 
] 
public 
List 
<  
EscalaEIndicacionesE (
>( )(
Listar_Escala_e_Indicaciones* F
(F G
stringG M
orderN S
,S T
stringU [
variable\ d
,d e
stringf l
valm p
,p q
stringr x
val1y }
,} ~
string	 Ö
val2
Ü ä
,
ä ã
string
å í
val3
ì ó
)
ó ò
{ 	
try 
{ 
string 
token 
= 
Criptography +
.+ ,"
DecryptConectionString, B
(B C
RequestC J
.J K
HeadersK R
.R S
WhereS X
(X Y
xY Z
=>[ ]
x^ _
._ `
Key` c
==d f
$strg v
)v w
.w x
FirstOrDefault	x Ü
(
Ü á
)
á à
.
à â
Value
â é
)
é è
;
è ê
if 
( 
token 
== 
_config $
.$ %
Key% (
)( )
{ 
List 
<  
EscalaEIndicacionesE -
>- .
Lista/ 4
=5 6
new7 :
List; ?
<? @ 
EscalaEIndicacionesE@ T
>T U
(U V
)V W
;W X
int 
_order 
=  
int! $
.$ %
Parse% *
(* +
Criptography+ 7
.7 8"
DecryptConectionString8 N
(N O
orderO T
.T U
ReplaceU \
(\ ]
$str] `
,` a
$strb e
)e f
)f g
)g h
;h i
int 
	_variable !
=" #
int$ '
.' (
Parse( -
(- .
Criptography. :
.: ;"
DecryptConectionString; Q
(Q R
variableR Z
.Z [
Replace[ b
(b c
$strc f
,f g
$strh k
)k l
)l m
)m n
;n o
string 
_val 
=  !
Criptography" .
.. /"
DecryptConectionString/ E
(E F
valF I
.I J
ReplaceJ Q
(Q R
$strR U
,U V
$strV Y
)Y Z
)Z [
;[ \
string   
_val1    
=  ! "
Criptography  # /
.  / 0"
DecryptConectionString  0 F
(  F G
val1  G K
.  K L
Replace  L S
(  S T
$str  T W
,  W X
$str  X [
)  [ \
)  \ ]
;  ] ^
string!! 
_val2!!  
=!!! "
Criptography!!# /
.!!/ 0"
DecryptConectionString!!0 F
(!!F G
val2!!G K
.!!K L
Replace!!L S
(!!S T
$str!!T W
,!!W X
$str!!X [
)!![ \
)!!\ ]
;!!] ^
string"" 
_val3""  
=""! "
Criptography""# /
.""/ 0"
DecryptConectionString""0 F
(""F G
val3""G K
.""K L
Replace""L S
(""S T
$str""T W
,""W X
$str""X [
)""[ \
)""\ ]
;""] ^
Lista## 
=## 
_objCN## "
.##" #&
Escala_e_indicaciones_List### =
(##= >
_order##> D
,##D E
	_variable##F O
,##O P
_val##Q U
,##U V
_val1##W \
,##\ ]
_val2##^ c
,##c d
_val3##e j
)##j k
;##k l
return$$ 
Lista$$  
;$$  !
}%% 
else&& 
{&& 
return'' 
new'' 
List'' #
<''# $ 
EscalaEIndicacionesE''$ 8
>''8 9
(''9 :
)'': ;
;''; <
}(( 
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 
new,, 
List,, 
<,,   
EscalaEIndicacionesE,,  4
>,,4 5
(,,5 6
),,6 7
;,,7 8
}-- 
}.. 	
[11 	
Route11	 
(11 
$str11 -
)11- .
]11. /
[22 	
HttpGet22	 
]22 
public33 
List33 
<33 )
EscalaEIndicacionesActividadE33 1
>331 23
'Listar_actividades_escalae_indicaciones333 Z
(33Z [
string33[ a
order33b g
,33g h
string33i o
variable33p x
,33x y
string	33z Ä
val
33Å Ñ
,
33Ñ Ö
string
33Ü å
val1
33ç ë
,
33ë í
string
33ì ô
val2
33ö û
,
33û ü
string
33† ¶
val3
33ß ´
)
33´ ¨
{44 	
try66 
{77 
string88 
token88 
=88 
Criptography88 +
.88+ ,"
DecryptConectionString88, B
(88B C
Request88C J
.88J K
Headers88K R
.88R S
Where88S X
(88X Y
x88Y Z
=>88[ ]
x88^ _
.88_ `
Key88` c
==88d f
$str88g v
)88v w
.88w x
FirstOrDefault	88x Ü
(
88Ü á
)
88á à
.
88à â
Value
88â é
)
88é è
;
88è ê
if99 
(99 
token99 
==99 
_config99 $
.99$ %
Key99% (
)99( )
{:: 
List;; 
<;; )
EscalaEIndicacionesActividadE;; 6
>;;6 7
Lista;;8 =
=;;> ?
new;;@ C
List;;D H
<;;H I)
EscalaEIndicacionesActividadE;;I f
>;;f g
(;;g h
);;h i
;;;i j
int<< 
_order<< 
=<<  
int<<! $
.<<$ %
Parse<<% *
(<<* +
Criptography<<+ 7
.<<7 8"
DecryptConectionString<<8 N
(<<N O
order<<O T
.<<T U
Replace<<U \
(<<\ ]
$str<<] `
,<<` a
$str<<b e
)<<e f
)<<f g
)<<g h
;<<h i
int== 
	_variable== !
===" #
int==$ '
.==' (
Parse==( -
(==- .
Criptography==. :
.==: ;"
DecryptConectionString==; Q
(==Q R
variable==R Z
.==Z [
Replace==[ b
(==b c
$str==c f
,==f g
$str==h k
)==k l
)==l m
)==m n
;==n o
string>> 
_val>> 
=>>  !
Criptography>># /
.>>/ 0"
DecryptConectionString>>0 F
(>>F G
val>>G J
.>>J K
Replace>>K R
(>>R S
$str>>S V
,>>V W
$str>>X [
)>>[ \
)>>\ ]
;>>^ _
string?? 
_val1??  
=??! "
Criptography??# /
.??/ 0"
DecryptConectionString??0 F
(??F G
val1??G K
.??K L
Replace??L S
(??S T
$str??T W
,??W X
$str??Y \
)??\ ]
)??] ^
;??^ _
string@@ 
_val2@@  
=@@! "
Criptography@@# /
.@@/ 0"
DecryptConectionString@@0 F
(@@F G
val2@@G K
.@@K L
Replace@@L S
(@@S T
$str@@T W
,@@W X
$str@@Y \
)@@\ ]
)@@] ^
;@@^ _
stringAA 
_val3AA  
=AA! "
CriptographyAA# /
.AA/ 0"
DecryptConectionStringAA0 F
(AAF G
val3AAG K
.AAK L
ReplaceAAL S
(AAS T
$strAAT W
,AAW X
$strAAY \
)AA\ ]
)AA] ^
;AA^ _
ListaBB 
=BB 
_objCNBB "
.BB" #-
!EscalaEIndicacionesActividad_ListBB# D
(BBD E
_orderBBE K
,BBK L
	_variableBBM V
,BBV W
_valBBX \
,BB\ ]
_val1BB^ c
,BBc d
_val2BBe j
,BBj k
_val3BBl q
)BBq r
;BBr s
returnCC 
ListaCC  
;CC  !
}DD 
elseEE 
{FF 
returnGG 
newGG 
ListGG #
<GG# $)
EscalaEIndicacionesActividadEGG$ A
>GGA B
(GGB C
)GGC D
;GGD E
}HH 
}II 
catchJJ 
(JJ 
	ExceptionJJ 
exJJ 
)JJ  
{KK 
returnLL 
newLL 
ListLL 
<LL  )
EscalaEIndicacionesActividadELL  =
>LL= >
(LL> ?
)LL? @
;LL@ A
}MM 
}NN 	
[PP 	
RoutePP	 
(PP 
$strPP 5
)PP5 6
]PP6 7
[QQ 	
HttpPostQQ	 
]QQ 
publicRR 
dynamicRR 0
$ActividadEscalaEindicacionesRegisterRR ;
(RR; <
PuntuacionEscalaERR< M
objRRN Q
)RRQ R
{RRS T
trySS 
{TT 
stringUU 
_IdUU 
=UU 
RequestUU $
.UU$ %
HeadersUU% ,
.UU, -
WhereUU- 2
(UU2 3
xUU3 4
=>UU5 7
xUU8 9
.UU9 :
KeyUU: =
==UU> @
$strUUA P
)UUP Q
.UUQ R
FirstOrDefaultUUR `
(UU` a
)UUa b
.UUb c
ValueUUc h
;UUh i
ifVV 
(VV 
stringVV 
.VV 
IsNullOrWhiteSpaceVV -
(VV- .
_IdVV. 1
)VV1 2
)VV2 3
{WW 
RespuestaJsonEXX "
_RjsonXX# )
=XX* +
newXX, /
RespuestaJsonEXX0 >
(XX> ?
)XX? @
;XX@ A
_RjsonYY 
.YY 
exitoYY  
=YY! "
falseYY# (
;YY( )
_RjsonZZ 
.ZZ 
messageZZ "
=ZZ# $
$strZZ% G
;ZZG H
_Rjson[[ 
.[[ 
status[[ !
=[[" #
$str[[$ +
;[[+ ,
return\\ 
_Rjson\\ !
;\\! "
}]] 
string^^ 
token^^ 
=^^ 
Criptography^^ +
.^^+ ,"
DecryptConectionString^^, B
(^^B C
_Id^^C F
)^^F G
;^^G H
if__ 
(__ 
token__ 
==__ 
_config__ $
.__$ %
Key__% (
)__( )
{`` 
RespuestaJsonEaa "
_Rjsonaa# )
=aa* +
newaa, /
RespuestaJsonEaa0 >
(aa> ?
)aa? @
;aa@ A
_Rjsonee 
=ee 
_objCNee #
.ee# $*
EscalaEintervenciones_Registeree$ B
(eeB C
objeeC F
)eeF G
;eeG H
returnff 
_Rjsonff !
;ff! "
}gg 
elsehh 
{ii 
RespuestaJsonEjj "
_Rjsonjj# )
=jj* +
newjj, /
RespuestaJsonEjj0 >
(jj> ?
)jj? @
;jj@ A
_Rjsonkk 
.kk 
exitokk  
=kk! "
falsekk# (
;kk( )
_Rjsonll 
.ll 
messagell "
=ll# $
$strll% G
;llG H
_Rjsonmm 
.mm 
statusmm !
=mm" #
$strmm$ +
;mm+ ,
returnoo 
_Rjsonoo !
;oo! "
}pp 
}qq 
catchrr 
(rr 
	Exceptionrr 
exrr 
)rr  
{rr! "
RespuestaJsonEss 
_Rjsonss  &
=ss' (
newss) ,
RespuestaJsonEss- ;
(ss; <
)ss< =
;ss= >
_Rjsontt 
.tt 
exitott 
=tt 
falsett $
;tt$ %
_Rjsonuu 
.uu 
messageuu 
=uu  
exuu! #
.uu# $
Messageuu$ +
;uu+ ,
_Rjsonvv 
.vv 
statusvv 
=vv 
$strvv  '
;vv' (
returnww 
_Rjsonww 
;ww 
}xx 
}yy 	
[{{ 	
Route{{	 
({{ 
$str{{ <
){{< =
]{{= >
[|| 	
HttpGet||	 
]|| 
public}} 
List}} 
<}} )
EscalaeIndicacionesHistoricoE}} 1
>}}1 27
+ActividadEscalaEindicacionesDatoshistoricos}}3 ^
(}}^ _
string}}_ e
order}}f k
,}}k l
string}}m s
variable}}t |
,}}| }
string	}}~ Ñ
val
}}Ö à
,
}}à â
string
}}ä ê
val1
}}ë ï
,
}}ï ñ
string
}}ó ù
val2
}}û ¢
,
}}¢ £
string
}}§ ™
val3
}}´ Ø
)
}}Ø ∞
{~~ 	
try
ÄÄ 
{
ÅÅ 
string
ÇÇ 
token
ÇÇ 
=
ÇÇ 
Criptography
ÇÇ +
.
ÇÇ+ ,$
DecryptConectionString
ÇÇ, B
(
ÇÇB C
Request
ÇÇC J
.
ÇÇJ K
Headers
ÇÇK R
.
ÇÇR S
Where
ÇÇS X
(
ÇÇX Y
x
ÇÇY Z
=>
ÇÇ[ ]
x
ÇÇ^ _
.
ÇÇ_ `
Key
ÇÇ` c
==
ÇÇd f
$str
ÇÇg v
)
ÇÇv w
.
ÇÇw x
FirstOrDefaultÇÇx Ü
(ÇÇÜ á
)ÇÇá à
.ÇÇà â
ValueÇÇâ é
)ÇÇé è
;ÇÇè ê
if
ÉÉ 
(
ÉÉ 
token
ÉÉ 
==
ÉÉ 
_config
ÉÉ $
.
ÉÉ$ %
Key
ÉÉ% (
)
ÉÉ( )
{
ÑÑ 
List
ÖÖ 
<
ÖÖ +
EscalaeIndicacionesHistoricoE
ÖÖ 6
>
ÖÖ6 7
Lista
ÖÖ8 =
=
ÖÖ> ?
new
ÖÖ@ C
List
ÖÖD H
<
ÖÖH I+
EscalaeIndicacionesHistoricoE
ÖÖI f
>
ÖÖf g
(
ÖÖg h
)
ÖÖh i
;
ÖÖi j
int
ÜÜ 
_order
ÜÜ 
=
ÜÜ  
int
ÜÜ! $
.
ÜÜ$ %
Parse
ÜÜ% *
(
ÜÜ* +
Criptography
ÜÜ+ 7
.
ÜÜ7 8$
DecryptConectionString
ÜÜ8 N
(
ÜÜN O
order
ÜÜO T
.
ÜÜT U
Replace
ÜÜU \
(
ÜÜ\ ]
$str
ÜÜ] `
,
ÜÜ` a
$str
ÜÜb e
)
ÜÜe f
)
ÜÜf g
)
ÜÜg h
;
ÜÜh i
int
áá 
	_variable
áá !
=
áá" #
int
áá$ '
.
áá' (
Parse
áá( -
(
áá- .
Criptography
áá. :
.
áá: ;$
DecryptConectionString
áá; Q
(
ááQ R
variable
ááR Z
.
ááZ [
Replace
áá[ b
(
ááb c
$str
áác f
,
ááf g
$str
ááh k
)
áák l
)
áál m
)
áám n
;
áán o
string
àà 
_val
àà 
=
àà  !
Criptography
àà" .
.
àà. /$
DecryptConectionString
àà/ E
(
ààE F
val
ààF I
.
ààI J
Replace
ààJ Q
(
ààQ R
$str
ààR U
,
ààU V
$str
ààW Z
)
ààZ [
)
àà[ \
;
àà\ ]
string
ââ 
_val1
ââ  
=
ââ! "
Criptography
ââ# /
.
ââ/ 0$
DecryptConectionString
ââ0 F
(
ââF G
val1
ââG K
.
ââK L
Replace
ââL S
(
ââS T
$str
ââT W
,
ââW X
$str
ââY \
)
ââ\ ]
)
ââ] ^
;
ââ^ _
string
ää 
_val2
ää  
=
ää! "
Criptography
ää# /
.
ää/ 0$
DecryptConectionString
ää0 F
(
ääF G
val2
ääG K
.
ääK L
Replace
ääL S
(
ääS T
$str
ääT W
,
ääW X
$str
ääY \
)
ää\ ]
)
ää] ^
;
ää^ _
string
ãã 
_val3
ãã  
=
ãã! "
Criptography
ãã# /
.
ãã/ 0$
DecryptConectionString
ãã0 F
(
ããF G
val3
ããG K
.
ããK L
Replace
ããL S
(
ããS T
$str
ããT W
,
ããW X
$str
ããY \
)
ãã\ ]
)
ãã] ^
;
ãã^ _
Lista
åå 
=
åå 
_objCN
åå "
.
åå" #/
!EscalaEIndicacionesHistorico_List
åå# D
(
ååD E
_order
ååE K
,
ååK L
	_variable
ååM V
,
ååV W
_val
ååX \
,
åå\ ]
_val1
åå^ c
,
ååc d
_val2
ååe j
,
ååj k
_val3
åål q
)
ååq r
;
åår s
return
çç 
Lista
çç  
;
çç  !
}
éé 
else
èè 
{
êê 
return
ëë 
new
ëë 
List
ëë #
<
ëë# $+
EscalaeIndicacionesHistoricoE
ëë$ A
>
ëëA B
(
ëëB C
)
ëëC D
;
ëëD E
}
íí 
}
ìì 
catch
îî 
(
îî 
	Exception
îî 
ex
îî 
)
îî  
{
ïï 
return
ññ 
new
ññ 
List
ññ 
<
ññ  +
EscalaeIndicacionesHistoricoE
ññ  =
>
ññ= >
(
ññ> ?
)
ññ? @
;
ññ@ A
}
óó 
}
òò 	
[
öö 	
Route
öö	 
(
öö 
$str
öö E
)
ööE F
]
ööF G
[
õõ 	
HttpGet
õõ	 
]
õõ 
public
úú 
List
úú 
<
úú 3
%EscalaEIndicacionesHistoriaDetalladoE
úú 9
>
úú9 :B
4ActividadEscalaEindicacionesDatoshistoricosDetallado
úú; o
(
úúo p
string
úúp v
order
úúw |
,
úú| }
stringúú~ Ñ
variableúúÖ ç
,úúç é
stringúúè ï
valúúñ ô
,úúô ö
stringúúõ °
val1úú¢ ¶
,úú¶ ß
stringúú® Æ
val2úúØ ≥
,úú≥ ¥
stringúúµ ª
val3úúº ¿
)úú¿ ¡
{
ùù 	
try
üü 
{
†† 
string
°° 
token
°° 
=
°° 
Criptography
°° +
.
°°+ ,$
DecryptConectionString
°°, B
(
°°B C
Request
°°C J
.
°°J K
Headers
°°K R
.
°°R S
Where
°°S X
(
°°X Y
x
°°Y Z
=>
°°[ ]
x
°°^ _
.
°°_ `
Key
°°` c
==
°°d f
$str
°°g v
)
°°v w
.
°°w x
FirstOrDefault°°x Ü
(°°Ü á
)°°á à
.°°à â
Value°°â é
)°°é è
;°°è ê
if
¢¢ 
(
¢¢ 
token
¢¢ 
==
¢¢ 
_config
¢¢ $
.
¢¢$ %
Key
¢¢% (
)
¢¢( )
{
££ 
List
§§ 
<
§§ 3
%EscalaEIndicacionesHistoriaDetalladoE
§§ >
>
§§> ?
Lista
§§@ E
=
§§F G
new
§§H K
List
§§L P
<
§§P Q3
%EscalaEIndicacionesHistoriaDetalladoE
§§Q v
>
§§v w
(
§§w x
)
§§x y
;
§§y z
int
•• 
_order
•• 
=
••  
int
••! $
.
••$ %
Parse
••% *
(
••* +
Criptography
••+ 7
.
••7 8$
DecryptConectionString
••8 N
(
••N O
order
••O T
.
••T U
Replace
••U \
(
••\ ]
$str
••] `
,
••` a
$str
••b e
)
••e f
)
••f g
)
••g h
;
••h i
int
¶¶ 
	_variable
¶¶ !
=
¶¶" #
int
¶¶$ '
.
¶¶' (
Parse
¶¶( -
(
¶¶- .
Criptography
¶¶. :
.
¶¶: ;$
DecryptConectionString
¶¶; Q
(
¶¶Q R
variable
¶¶R Z
.
¶¶Z [
Replace
¶¶[ b
(
¶¶b c
$str
¶¶c f
,
¶¶f g
$str
¶¶h k
)
¶¶k l
)
¶¶l m
)
¶¶m n
;
¶¶n o
string
ßß 
_val
ßß 
=
ßß  !
Criptography
ßß" .
.
ßß. /$
DecryptConectionString
ßß/ E
(
ßßE F
val
ßßF I
.
ßßI J
Replace
ßßJ Q
(
ßßQ R
$str
ßßR U
,
ßßU V
$str
ßßW Z
)
ßßZ [
)
ßß[ \
;
ßß\ ]
string
®® 
_val1
®®  
=
®®! "
Criptography
®®# /
.
®®/ 0$
DecryptConectionString
®®0 F
(
®®F G
val1
®®G K
.
®®K L
Replace
®®L S
(
®®S T
$str
®®T W
,
®®W X
$str
®®Y \
)
®®\ ]
)
®®] ^
;
®®^ _
string
©© 
_val2
©©  
=
©©! "
Criptography
©©# /
.
©©/ 0$
DecryptConectionString
©©0 F
(
©©F G
val2
©©G K
.
©©K L
Replace
©©L S
(
©©S T
$str
©©T W
,
©©W X
$str
©©Y \
)
©©\ ]
)
©©] ^
;
©©^ _
string
™™ 
_val3
™™  
=
™™! "
Criptography
™™# /
.
™™/ 0$
DecryptConectionString
™™0 F
(
™™F G
val3
™™G K
.
™™K L
Replace
™™L S
(
™™S T
$str
™™T W
,
™™W X
$str
™™Y \
)
™™\ ]
)
™™] ^
;
™™^ _
Lista
´´ 
=
´´ 
_objCN
´´ "
.
´´" #8
*EscalaEIndicacionesHistoricoDetallado_List
´´# M
(
´´M N
_order
´´N T
,
´´T U
	_variable
´´V _
,
´´_ `
_val
´´a e
,
´´e f
_val1
´´g l
,
´´l m
_val2
´´n s
,
´´s t
_val3
´´u z
)
´´z {
;
´´{ |
return
¨¨ 
Lista
¨¨  
;
¨¨  !
}
≠≠ 
else
ÆÆ 
{
ØØ 
return
∞∞ 
new
∞∞ 
List
∞∞ #
<
∞∞# $3
%EscalaEIndicacionesHistoriaDetalladoE
∞∞$ I
>
∞∞I J
(
∞∞J K
)
∞∞K L
;
∞∞L M
}
±± 
}
≤≤ 
catch
≥≥ 
(
≥≥ 
	Exception
≥≥ 
ex
≥≥ 
)
≥≥  
{
¥¥ 
return
µµ 
new
µµ 
List
µµ 
<
µµ  3
%EscalaEIndicacionesHistoriaDetalladoE
µµ  E
>
µµE F
(
µµF G
)
µµG H
;
µµH I
}
∂∂ 
}
∑∑ 	
}
∏∏ 
}ππ √0
^D:\CLINICA\nsp-csfl-agenda-uti-automatizacion_qa\Api.Clinica\Controllers\DatosWebController.cs
	namespace 	
Api
 
. 
Clinica 
. 
Controllers !
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 )
)		) *
]		* +
public 

class 
DatosWebController #
:# $
ControllerBase$ 2
{ 
Config 
_config 
= 
new 
Config #
(# $
)$ %
;% &
[ 	
Route	 
( 
$str *
)* +
]+ ,
[ 	
HttpGet	 
] 
public 
dynamic 
EncriptDatosMedico )
() *
string* 0
_key1 5
)5 6
{ 	
RespuestaJsonE 
_Rjson !
=" #
new$ '
RespuestaJsonE( 6
(6 7
)7 8
;8 9
try 
{ 
string 
token 
= 
Criptography +
.+ ,"
DecryptConectionString, B
(B C
RequestC J
.J K
HeadersK R
.R S
WhereS X
(X Y
xY Z
=>[ ]
x^ _
._ `
Key` c
==d f
$strg v
)v w
.w x
FirstOrDefault	x Ü
(
Ü á
)
á à
.
à â
Value
â é
)
é è
;
è ê
if 
( 
token 
== 
_config $
.$ %
Key% (
)( )
{ 
string 
Dato 
=  !
Criptography" .
.. /"
DecryptConectionString/ E
(E F
_keyF J
.J K
ReplaceK R
(R S
$strS V
,V W
$strX [
)[ \
)\ ]
;] ^
string 
menssage #
=$ %
Criptography& 2
.2 3
EncryptStringAES2563 F
(F G
DatoG K
)K L
;L M
_Rjson   
.   
exito    
=  ! "
true  # '
;  ' (
_Rjson!! 
.!! 
message!! "
=!!# $
menssage!!% -
;!!- .
_Rjson"" 
."" 
status"" !
=""" #
$str""$ (
;""( )
return## 
_Rjson## !
;##! "
}$$ 
else%% 
{&& 
_Rjson'' 
.'' 
exito''  
=''! "
false''# (
;''( )
_Rjson(( 
.(( 
message(( "
=((# $
$str((% G
;((G H
_Rjson)) 
.)) 
status)) !
=))" #
$str))$ +
;))+ ,
return** 
_Rjson** !
;**! "
}++ 
},, 
catch-- 
(-- 
	Exception-- 
ex-- 
)--  
{.. 
_Rjson// 
.// 
exito// 
=// 
false// $
;//$ %
_Rjson00 
.00 
message00 
=00  
ex00! #
.00# $
Message00$ +
;00+ ,
_Rjson11 
.11 
status11 
=11 
$str11  '
;11' (
return22 
_Rjson22 
;22 
}33 
}44 	
[77 	
Route77	 
(77 
$str77 %
)77% &
]77& '
[88 	
HttpGet88	 
]88 
public99 
List99 
<99 
string99 
>99 
EncriptarDatosROW99 -
(99- .
string99. 4
_Key995 9
)999 :
{:: 	
List;; 
<;; 
string;; 
>;; 
_data;; 
=;;  
new;;! $
List;;% )
<;;) *
string;;* 0
>;;0 1
(;;1 2
);;2 3
;;;3 4
try<< 
{== 
string>> 
token>> 
=>> 
Criptography>> +
.>>+ ,"
DecryptConectionString>>, B
(>>B C
Request>>C J
.>>J K
Headers>>K R
.>>R S
Where>>S X
(>>X Y
x>>Y Z
=>>>[ ]
x>>^ _
.>>_ `
Key>>` c
==>>d f
$str>>g v
)>>v w
.>>w x
FirstOrDefault	>>x Ü
(
>>Ü á
)
>>á à
.
>>à â
Value
>>â é
)
>>é è
;
>>è ê
if?? 
(?? 
token?? 
==?? 
_config?? $
.??$ %
Key??% (
)??( )
{@@ 
varAA 

split_dataAA "
=AA# $
_KeyAA% )
.AA) *
SplitAA* /
(AA/ 0
$charAA0 3
)AA3 4
;AA4 5
foreachBB 
(BB 
varBB  
splitBB! &
inBB' )

split_dataBB* 4
)BB4 5
{CC 
varDD 
encriptDD #
=DD$ %
CriptographyDD& 2
.DD2 3"
EncryptStringAES256ROEDD3 I
(DDI J
splitDDJ O
)DDO P
;DDP Q
_dataEE 
.EE 
AddEE !
(EE! "
encriptEE" )
)EE) *
;EE* +
}FF 
}GG 
elseHH 
{HH 
_dataII 
=II 
newII 
ListII  $
<II$ %
stringII% +
>II+ ,
(II, -
)II- .
;II. /
}JJ 
}KK 
catchLL 
(LL 
	ExceptionLL 
exLL 
)LL  
{LL! "
_dataMM 
=MM 
newMM 
ListMM  
<MM  !
stringMM! '
>MM' (
(MM( )
)MM) *
;MM* +
}NN 
returnPP 
_dataPP 
;PP 
}QQ 	
}SS 
}TT 